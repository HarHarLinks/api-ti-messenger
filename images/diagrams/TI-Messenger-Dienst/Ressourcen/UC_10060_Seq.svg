<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2163.7949px" preserveAspectRatio="none" style="width:2048px;height:2163px;background:#FFFFFF;" version="1.1" viewBox="0 0 2048 2163" width="2048.9813px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="2152.9851" style="stroke:#181818;stroke-width:0.49065644465740305;" width="226.6833" x="231.0992" y="5.8879"/><text fill="#000000" font-family="sans-serif" font-size="17.6636" font-weight="bold" lengthAdjust="spacing" textLength="77.5237" x="303.7163" y="24.2242">Endgerät</text><text fill="#000000" font-family="sans-serif" font-size="12.7571" font-weight="bold" lengthAdjust="spacing" textLength="3.9253" x="381.2401" y="25.3023"> </text><rect fill="#F5F5F5" height="2152.9851" style="stroke:#181818;stroke-width:0.49065644465740305;" width="803.6953" x="1016.6402" y="5.8879"/><text fill="#000000" font-family="sans-serif" font-size="17.6636" font-weight="bold" lengthAdjust="spacing" textLength="167.8045" x="1332.6229" y="24.2242">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="12.7571" font-weight="bold" lengthAdjust="spacing" textLength="3.9253" x="1500.4274" y="25.3023"> </text><rect fill="#DCDCDC" height="1612.2051" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="339.5343" y="361.8745"/><rect fill="#DCDCDC" height="115.3848" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="601.5448" y="408.7973"/><rect fill="#DCDCDC" height="1265.495" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="601.5448" y="652.8797"/><rect fill="#DCDCDC" height="103.1835" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="1096.1265" y="1261.7537"/><rect fill="#DCDCDC" height="82.2003" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="1278.6507" y="1424.1917"/><rect fill="#DCDCDC" height="241.0886" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="1532.8107" y="1586.6296"/><rect fill="#DCDCDC" height="103.1835" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="1731.0359" y="1689.8131"/><rect fill="#DCDCDC" height="132.4006" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="1912.5788" y="940.0671"/><rect fill="none" height="1760.9966" style="stroke:#000000;stroke-width:1.471969333972209;" width="2033.2803" x="9.8131" y="245.4662"/><rect fill="none" height="437.2516" style="stroke:#000000;stroke-width:1.471969333972209;" width="1535.7547" x="497.5256" y="692.1322"/><rect fill="none" height="692.4466" style="stroke:#000000;stroke-width:1.471969333972209;" width="1395.4269" x="497.5256" y="1167.655"/><line style="stroke:#000000;stroke-width:0.49065644465740305;stroke-dasharray:5.0,5.0;" x1="102.0565" x2="102.0565" y1="113.1576" y2="2047.678"/><line style="stroke:#000000;stroke-width:0.49065644465740305;stroke-dasharray:5.0,5.0;" x1="343.9502" x2="343.9502" y1="113.1576" y2="2047.678"/><line style="stroke:#000000;stroke-width:0.49065644465740305;stroke-dasharray:5.0,5.0;" x1="606.4514" x2="606.4514" y1="113.1576" y2="2047.678"/><line style="stroke:#000000;stroke-width:0.49065644465740305;stroke-dasharray:5.0,5.0;" x1="1101.0331" x2="1101.0331" y1="113.1576" y2="2047.678"/><line style="stroke:#000000;stroke-width:0.49065644465740305;stroke-dasharray:5.0,5.0;" x1="1283.5573" x2="1283.5573" y1="113.1576" y2="2047.678"/><line style="stroke:#000000;stroke-width:0.49065644465740305;stroke-dasharray:5.0,5.0;" x1="1537.7173" x2="1537.7173" y1="113.1576" y2="2047.678"/><line style="stroke:#000000;stroke-width:0.49065644465740305;stroke-dasharray:5.0,5.0;" x1="1735.9425" x2="1735.9425" y1="113.1576" y2="2047.678"/><line style="stroke:#000000;stroke-width:0.49065644465740305;stroke-dasharray:5.0,5.0;" x1="1917.4854" x2="1917.4854" y1="937.8055" y2="2047.678"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="158.9727" x="19.6263" y="84.1591">Akteur in der Rolle</text><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="93.2247" x="52.5002" y="108.8452">Org-Admin</text><ellipse cx="102.0565" cy="13.2477" fill="#DCDCDC" rx="7.8505" ry="7.8505" style="stroke:#000000;stroke-width:0.49065644465740305;"/><path d="M102.0565,21.0982 L102.0565,47.5937 M89.2995,28.9487 L114.8136,28.9487 M102.0565,47.5937 L89.2995,62.3134 M102.0565,47.5937 L114.8136,62.3134 " fill="none" style="stroke:#000000;stroke-width:0.49065644465740305;"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="158.9727" x="19.6263" y="2067.0704">Akteur in der Rolle</text><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="93.2247" x="52.5002" y="2091.7566">Org-Admin</text><ellipse cx="102.0565" cy="2104.4102" fill="#DCDCDC" rx="7.8505" ry="7.8505" style="stroke:#000000;stroke-width:0.49065644465740305;"/><path d="M102.0565,2112.2607 L102.0565,2138.7561 M89.2995,2120.1112 L114.8136,2120.1112 M102.0565,2138.7561 L89.2995,2153.4758 M102.0565,2138.7561 L114.8136,2153.4758 " fill="none" style="stroke:#000000;stroke-width:0.49065644465740305;"/><rect fill="#EFEFFF" height="63.1107" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="218.8328" x="235.0244" y="49.0656"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="113.8323" x="287.5247" y="76.3086">Frontend des</text><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="205.0944" x="241.8936" y="100.9947">Registrierungs-Dienstes</text><rect fill="#EFEFFF" height="63.1107" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="218.8328" x="235.0244" y="2046.6967"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="113.8323" x="287.5247" y="2073.9396">Frontend des</text><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="205.0944" x="241.8936" y="2098.6258">Registrierungs-Dienstes</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="198.2252" x="507.3388" y="73.7518"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="184.4868" x="514.208" y="100.9947">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="198.2252" x="507.3388" y="2046.6967"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="184.4868" x="514.208" y="2073.9396">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="160.9353" x="1020.5654" y="73.7518"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="124.6267" x="1038.7197" y="100.9947">OAuth-Service</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="160.9353" x="1020.5654" y="2046.6967"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="124.6267" x="1038.7197" y="2073.9396">OAuth-Service</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="160.9353" x="1203.0896" y="73.7518"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="108.9257" x="1229.0944" y="100.9947">Auth-Service</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="160.9353" x="1203.0896" y="2046.6967"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="108.9257" x="1229.0944" y="2073.9396">Auth-Service</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="160.9353" x="1457.2496" y="73.7518"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="100.0939" x="1487.6703" y="100.9947">FHIR-Proxy</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="160.9353" x="1457.2496" y="2046.6967"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="100.0939" x="1487.6703" y="2073.9396">FHIR-Proxy</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="160.9353" x="1655.4748" y="73.7518"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="129.5333" x="1671.1759" y="100.9947">FHIR-Directory</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="160.9353" x="1655.4748" y="2046.6967"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="129.5333" x="1671.1759" y="2073.9396">FHIR-Directory</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="180.5616" x="1827.2046" y="2046.6967"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="166.8232" x="1834.0738" y="2073.9396">Messenger-Service</text><rect fill="#DCDCDC" height="1612.2051" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="339.5343" y="361.8745"/><rect fill="#DCDCDC" height="115.3848" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="601.5448" y="408.7973"/><rect fill="#DCDCDC" height="1265.495" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="601.5448" y="652.8797"/><rect fill="#DCDCDC" height="103.1835" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="1096.1265" y="1261.7537"/><rect fill="#DCDCDC" height="82.2003" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="1278.6507" y="1424.1917"/><rect fill="#DCDCDC" height="241.0886" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="1532.8107" y="1586.6296"/><rect fill="#DCDCDC" height="103.1835" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="1731.0359" y="1689.8131"/><rect fill="#DCDCDC" height="132.4006" style="stroke:#000000;stroke-width:0.9813128893148061;" width="9.8131" x="1912.5788" y="940.0671"/><rect fill="none" height="61.654" style="stroke:#000000;stroke-width:1.471969333972209;" width="691.8256" x="16.6823" y="147.5036"/><path d="M16.6823,147.5036 L77.5237,147.5036 L77.5237,155.3541 L67.7106,165.1672 L16.6823,165.1672 L16.6823,147.5036 " fill="#98FB98" style="stroke:#000000;stroke-width:1.9626257786296122;"/><text fill="#000000" font-family="sans-serif" font-size="12.7571" font-weight="bold" lengthAdjust="spacing" textLength="16.6823" x="29.4394" y="162.7092">ref</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="75.5611" x="107.4538" y="186.4102">AF: 10103</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="429.815" x="187.9214" y="186.4102">- Authentisieren einer Organisation am TI-Messenger-Dienst</text><text fill="#000000" font-family="sans-serif" font-size="11.7758" lengthAdjust="spacing" textLength="2.9439" x="361.1231" y="202.3"> </text><path d="M9.8131,245.4662 L81.449,245.4662 L81.449,253.6617 L71.6358,263.4748 L9.8131,263.4748 L9.8131,245.4662 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.471969333972209;"/><rect fill="none" height="1760.9966" style="stroke:#000000;stroke-width:1.471969333972209;" width="2033.2803" x="9.8131" y="245.4662"/><text fill="#000000" font-family="sans-serif" font-size="12.7571" font-weight="bold" lengthAdjust="spacing" textLength="27.4768" x="24.5328" y="259.6905">loop</text><text fill="#000000" font-family="sans-serif" font-size="10.7944" font-weight="bold" lengthAdjust="spacing" textLength="3.9253" x="96.1687" y="264.8059">[</text><text fill="#000000" font-family="sans-serif" font-size="15.701" font-weight="bold" lengthAdjust="spacing" textLength="26.4954" x="100.0939" y="263.7278">1..n</text><text fill="#000000" font-family="sans-serif" font-size="10.7944" font-weight="bold" lengthAdjust="spacing" textLength="3.9253" x="126.5894" y="264.8059">]</text><polygon fill="#000000" points="327.7585,357.9492,337.5716,361.8745,327.7585,365.7997,331.6838,361.8745" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="102.0565" x2="333.6464" y1="361.8745" y2="361.8745"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="8.8318" x="108.9257" y="335.2631">1</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="183.5055" x="121.6828" y="314.2798">Mit einem Admin-Account</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="180.5616" x="121.6828" y="335.2631">am Registrierungs-Dienst</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="68.6919" x="121.6828" y="356.2463">anmelden</text><polygon fill="#000000" points="589.769,404.8721,599.5822,408.7973,589.769,412.7226,593.6943,408.7973" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="349.3474" x2="595.6569" y1="408.7973" y2="408.7973"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="8.8318" x="356.2166" y="403.1691">2</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="220.7954" x="368.9736" y="403.1691">POST /login (Client-Credential)</text><path d="M616.2645,374.6315 L616.2645,423.6972 L835.0973,423.6972 L835.0973,384.4447 L825.2841,374.6315 L616.2645,374.6315 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.49065644465740305;"/><path d="M825.2841,374.6315 L825.2841,384.4447 L835.0973,384.4447 L825.2841,374.6315 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.49065644465740305;"/><text fill="#000000" font-family="sans-serif" font-size="15.701" lengthAdjust="spacing" textLength="149.1596" x="622.1524" y="395.8371">Schnittstelle wird nicht</text><text fill="#000000" font-family="sans-serif" font-size="15.701" lengthAdjust="spacing" textLength="198.2252" x="622.1524" y="415.586">durch die gematik spezifiziert</text><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="611.3579" x2="652.5731" y1="476.7034" y2="476.7034"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="652.5731" x2="652.5731" y1="476.7034" y2="489.4605"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="612.3392" x2="652.5731" y1="489.4605" y2="489.4605"/><polygon fill="#000000" points="622.1524,485.5352,612.3392,489.4605,622.1524,493.3857,618.2271,489.4605" style="stroke:#000000;stroke-width:0.9813128893148061;"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="8.8318" x="618.2271" y="460.5836">3</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="37.2899" x="630.9842" y="450.092">prüfe</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="118.7389" x="630.9842" y="471.0752">Client-Credential</text><polygon fill="#000000" points="360.1418,520.2568,350.3287,524.1821,360.1418,528.1073,356.2166,524.1821" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="354.254" x2="605.4701" y1="524.1821" y2="524.1821"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="8.8318" x="545.61" y="518.5539">4</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="41.2151" x="558.367" y="518.5539">status</text><polygon fill="#000000" points="112.851,554.9784,103.0379,558.9037,112.851,562.8289,108.9257,558.9037" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="106.9631" x2="338.5529" y1="558.9037" y2="558.9037"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="8.8318" x="155.0474" y="553.2755">5</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="164.8606" x="167.8045" y="553.2755">Erfolgreich angemeldet</text><polygon fill="#000000" points="327.7585,614.2329,337.5716,618.1581,327.7585,622.0834,331.6838,618.1581" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="102.0565" x2="333.6464" y1="618.1581" y2="618.1581"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="8.8318" x="108.9257" y="612.5299">6</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="201.1691" x="121.6828" y="612.5299">Messenger Service erstellen</text><polygon fill="#000000" points="589.769,648.9545,599.5822,652.8797,589.769,656.805,593.6943,652.8797" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="349.3474" x2="595.6569" y1="652.8797" y2="652.8797"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="8.8318" x="356.2166" y="647.2516">7</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="216.8701" x="368.9736" y="647.2516">POST /create (Matrix-Domain)</text><path d="M497.5256,692.1322 L751.6857,692.1322 L751.6857,704.0307 L741.8725,713.8438 L497.5256,713.8438 L497.5256,692.1322 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.471969333972209;"/><rect fill="none" height="437.2516" style="stroke:#000000;stroke-width:1.471969333972209;" width="1535.7547" x="497.5256" y="692.1322"/><text fill="#000000" font-family="sans-serif" font-size="15.701" font-weight="bold" lengthAdjust="spacing" textLength="210.001" x="512.2453" y="709.4126">Messaging-Service erstellen</text><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="611.3579" x2="652.5731" y1="765.2477" y2="765.2477"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="652.5731" x2="652.5731" y1="765.2477" y2="778.0048"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="612.3392" x2="652.5731" y1="778.0048" y2="778.0048"/><polygon fill="#000000" points="622.1524,774.0795,612.3392,778.0048,622.1524,781.93,618.2271,778.0048" style="stroke:#000000;stroke-width:0.9813128893148061;"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="8.8318" x="618.2271" y="759.6195">8</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="271.8237" x="630.9842" y="759.6195">Prüfung auf zulässigen Domainnamen</text><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="611.3579" x2="652.5731" y1="858.2425" y2="858.2425"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="652.5731" x2="652.5731" y1="858.2425" y2="870.9995"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="612.3392" x2="652.5731" y1="870.9995" y2="870.9995"/><polygon fill="#000000" points="622.1524,867.0743,612.3392,870.9995,622.1524,874.9248,618.2271,870.9995" style="stroke:#000000;stroke-width:0.9813128893148061;"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="8.8318" x="618.2271" y="842.1227">9</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="234.5338" x="630.9842" y="831.631">Starte neuen Messenger-Service</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="274.7676" x="630.9842" y="852.6143">für die Organisation mit Matrix-Domain</text><polygon fill="#000000" points="1815.4288,926.3287,1825.242,930.254,1815.4288,934.1792,1819.3541,930.254" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="611.3579" x2="1821.3167" y1="930.254" y2="930.254"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="618.2271" y="924.6258">10</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="202.1505" x="639.816" y="924.6258">Messenger-Service erstellen</text><rect fill="#EFEFFF" height="38.4245" rx="2.4533" ry="2.4533" style="stroke:#000000;stroke-width:0.49065644465740305;" width="180.5616" x="1827.2046" y="903.3828"/><text fill="#000000" font-family="sans-serif" font-size="19.6263" lengthAdjust="spacing" textLength="166.8232" x="1834.0738" y="930.6258">Messenger-Service</text><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1922.392" x2="1963.6071" y1="1024.989" y2="1024.989"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1963.6071" x2="1963.6071" y1="1024.989" y2="1037.746"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1923.3733" x2="1963.6071" y1="1037.746" y2="1037.746"/><polygon fill="#000000" points="1933.1864,1033.8208,1923.3733,1037.746,1933.1864,1041.6713,1929.2611,1037.746" style="stroke:#000000;stroke-width:0.9813128893148061;"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="1929.2611" y="1008.8692">11</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="36.3086" x="1950.85" y="998.3776">initial</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="70.6545" x="1950.85" y="1019.3608">einrichten</text><polygon fill="#000000" points="622.1524,1068.5424,612.3392,1072.4677,622.1524,1076.3929,618.2271,1072.4677" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="616.2645" x2="1916.5041" y1="1072.4677" y2="1072.4677"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="1847.8122" y="1066.8395">12</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="41.2151" x="1869.4011" y="1066.8395">status</text><path d="M497.5256,1167.655 L902.8079,1167.655 L902.8079,1179.5534 L892.9947,1189.3666 L497.5256,1189.3666 L497.5256,1167.655 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.471969333972209;"/><rect fill="none" height="692.4466" style="stroke:#000000;stroke-width:1.471969333972209;" width="1395.4269" x="497.5256" y="1167.655"/><text fill="#000000" font-family="sans-serif" font-size="15.701" font-weight="bold" lengthAdjust="spacing" textLength="361.1231" x="512.2453" y="1184.9353">Messenger-Service in die Föderation aufnehmen</text><polygon fill="#000000" points="1084.3507,1257.8285,1094.1639,1261.7537,1084.3507,1265.679,1088.276,1261.7537" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="611.3579" x2="1090.2386" y1="1261.7537" y2="1261.7537"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="618.2271" y="1245.6339">13</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="439.6282" x="639.816" y="1235.1423">POST /auth/realms/TI-Provider/protocol/openid-connect/token</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="170.7484" x="639.816" y="1256.1255">(client_id, client_secret)</text><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1105.9396" x2="1147.1548" y1="1317.4586" y2="1317.4586"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1147.1548" x2="1147.1548" y1="1317.4586" y2="1330.2156"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1106.9209" x2="1147.1548" y1="1330.2156" y2="1330.2156"/><polygon fill="#000000" points="1116.7341,1326.2904,1106.9209,1330.2156,1116.7341,1334.1409,1112.8088,1330.2156" style="stroke:#000000;stroke-width:0.9813128893148061;"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="1112.8088" y="1301.3388">14</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="132.4772" x="1134.3977" y="1290.8471">prüfe client_id und</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="90.2808" x="1134.3977" y="1311.8304">client_secret</text><polygon fill="#000000" points="622.1524,1361.012,612.3392,1364.9372,622.1524,1368.8625,618.2271,1364.9372" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="616.2645" x2="1100.0517" y1="1364.9372" y2="1364.9372"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="905.7518" y="1359.3091">15</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="166.8232" x="927.3407" y="1359.3091">ti-provider-accesstoken</text><polygon fill="#000000" points="1266.8749,1420.2664,1276.6881,1424.1917,1266.8749,1428.1169,1270.8002,1424.1917" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="611.3579" x2="1272.7628" y1="1424.1917" y2="1424.1917"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="618.2271" y="1418.5635">16</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="383.6933" x="639.816" y="1418.5635">GET /ti-provider-authenticate(ti-provider-accesstoken)</text><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1288.4638" x2="1329.679" y1="1458.9133" y2="1458.9133"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1329.679" x2="1329.679" y1="1458.9133" y2="1471.6703"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1289.4451" x2="1329.679" y1="1471.6703" y2="1471.6703"/><polygon fill="#000000" points="1299.2583,1467.7451,1289.4451,1471.6703,1299.2583,1475.5956,1295.333,1471.6703" style="stroke:#000000;stroke-width:0.9813128893148061;"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="1295.333" y="1453.2851">17</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="209.0196" x="1316.9219" y="1453.2851">prüfe ti-provider-accesstoken</text><polygon fill="#000000" points="622.1524,1502.4667,612.3392,1506.392,622.1524,1510.3172,618.2271,1506.392" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="616.2645" x2="1282.5759" y1="1506.392" y2="1506.392"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="1102.0144" y="1500.7638">18</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="153.0848" x="1123.6033" y="1500.7638">provider-accesstoken</text><polygon fill="#000000" points="1521.035,1582.7044,1530.8481,1586.6296,1521.035,1590.5549,1524.9602,1586.6296" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="611.3579" x2="1526.9229" y1="1586.6296" y2="1586.6296"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="618.2271" y="1570.5098">19</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="277.7115" x="639.816" y="1560.0182">POST /tim-provider-services/federation</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="470.0489" x="639.816" y="1581.0014">(provider-accesstoken, Matrix-Domain, TelematikID, isEnsurance)</text><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1542.6239" x2="1583.839" y1="1642.3345" y2="1642.3345"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1583.839" x2="1583.839" y1="1642.3345" y2="1655.0915"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1543.6052" x2="1583.839" y1="1655.0915" y2="1655.0915"/><polygon fill="#000000" points="1553.4183,1651.1663,1543.6052,1655.0915,1553.4183,1659.0168,1549.4931,1655.0915" style="stroke:#000000;stroke-width:0.9813128893148061;"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="1549.4931" y="1626.2147">20</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="37.2899" x="1571.0819" y="1615.723">prüfe</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="153.0848" x="1571.0819" y="1636.7063">provider-accesstoken</text><polygon fill="#000000" points="1719.2602,1685.8879,1729.0733,1689.8131,1719.2602,1693.7384,1723.1854,1689.8131" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="1542.6239" x2="1725.1481" y1="1689.8131" y2="1689.8131"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="1549.4931" y="1684.185">21</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="113.8323" x="1571.0819" y="1684.185">HTTPS Forward</text><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="1740.8491" x2="1782.0642" y1="1745.518" y2="1745.518"/><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="1782.0642" x2="1782.0642" y1="1745.518" y2="1758.275"/><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="1741.8304" x2="1782.0642" y1="1758.275" y2="1758.275"/><polygon fill="#000000" points="1751.6435,1754.3498,1741.8304,1758.275,1751.6435,1762.2003,1747.7183,1758.275" style="stroke:#000000;stroke-width:0.9813128893148061;"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="1747.7183" y="1729.3982">22</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="111.8697" x="1769.3071" y="1718.9066">Föderationsliste</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="89.2995" x="1769.3071" y="1739.8898">aktualisieren</text><polygon fill="#000000" points="1553.4183,1789.0714,1543.6052,1792.9966,1553.4183,1796.9219,1549.4931,1792.9966" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="1547.5304" x2="1734.9612" y1="1792.9966" y2="1792.9966"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="1666.2693" y="1787.3685">23</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="41.2151" x="1687.8582" y="1787.3685">status</text><polygon fill="#000000" points="622.1524,1823.793,612.3392,1827.7183,622.1524,1831.6435,618.2271,1827.7183" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;stroke-dasharray:2.0,2.0;" x1="616.2645" x2="1536.736" y1="1827.7183" y2="1827.7183"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="1395.4269" y="1822.0901">24</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="113.8323" x="1417.0158" y="1822.0901">HTTPS Forward</text><polygon fill="#000000" points="360.1418,1914.4494,350.3287,1918.3747,360.1418,1922.3,356.2166,1918.3747" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="354.254" x2="605.4701" y1="1918.3747" y2="1918.3747"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="536.7782" y="1912.7465">25</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="41.2151" x="558.367" y="1912.7465">status</text><polygon fill="#000000" points="112.851,1970.1543,103.0379,1974.0795,112.851,1978.0048,108.9257,1974.0795" style="stroke:#000000;stroke-width:0.9813128893148061;"/><line style="stroke:#000000;stroke-width:0.9813128893148061;" x1="106.9631" x2="343.4595" y1="1974.0795" y2="1974.0795"/><text fill="#000000" font-family="sans-serif" font-size="16.6823" font-weight="bold" lengthAdjust="spacing" textLength="17.6636" x="173.6924" y="1957.9598">26</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="137.3838" x="195.2813" y="1947.4681">Messenger Service</text><text fill="#000000" font-family="sans-serif" font-size="16.6823" lengthAdjust="spacing" textLength="126.5894" x="195.2813" y="1968.4514">erfolgreich erstellt</text><!--MD5=[95ee27730b920f59aa7cd37604f59101]
@startuml
skinparam sequenceMessageAlign direction
skinparam WrapWidth 300
skinparam minClassWidth 150
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
}

autonumber

    actor U as "Akteur in der Rolle\nOrg-Admin"
    box <size:18>Endgerät</size> #WhiteSmoke
      participant C as "Frontend des\nRegistrierungs-Dienstes"
    end box
    participant R as "Registrierungs-Dienst"
    box <size:18>VZD-FHIR-Directory</size> #WhiteSmoke
    participant Auth as "OAuth-Service"
    participant AuthService as "Auth-Service"
    participant FP as "FHIR-Proxy"
    participant VZD as "FHIR-Directory"
    end box

|||
ref over U, R: <size:17>**AF: 10103** - Authentisieren einer Organisation am TI-Messenger-Dienst</size>\n 
|||

loop <size:16>1..n</size>
  |||
  U->C: Mit einem Admin-Account \nam Registrierungs-Dienst \nanmelden
    Activate C
  C->R: POST /login (Client-Credential)
  note right: <size:16>Schnittstelle wird nicht \n<size:16>durch die gematik spezifiziert</size>
    Activate R
  R->R: prüfe \nClient-Credential
  R- ->C: status
    Deactivate R
  C- ->U: Erfolgreich angemeldet
  |||
  U->C: Messenger Service erstellen
  C->R: POST /create (Matrix-Domain)
    Activate R
    
    |||
    group <size:16>Messaging-Service erstellen</size>
    |||
      R->R: Prüfung auf zulässigen Domainnamen
      |||
      R->R: Starte neuen Messenger-Service \nfür die Organisation mit Matrix-Domain
      |||
        create "Messenger-Service"
          R- ->"Messenger-Service" : Messenger-Service erstellen 
        Activate "Messenger-Service"
      |||
      "Messenger-Service"->"Messenger-Service": initial \neinrichten
      "Messenger-Service"- ->R: status
      |||
        Deactivate "Messenger-Service"
    |||
    end
    
    |||
    
    group <size:16>Messenger-Service in die Föderation aufnehmen</size>
    |||
      R->Auth: POST /auth/realms/TI-Provider/protocol/openid-connect/token \n(client_id, client_secret) 
        Activate Auth
      Auth->Auth: prüfe client_id und \nclient_secret
      Auth- ->R: ti-provider-accesstoken
        Deactivate Auth
      |||
      R->AuthService: GET /ti-provider-authenticate(ti-provider-accesstoken)
        Activate AuthService
      AuthService->AuthService: prüfe ti-provider-accesstoken
      AuthService- ->R: provider-accesstoken
        Deactivate AuthService
      |||
      R->FP: POST /tim-provider-services/federation \n(provider-accesstoken, Matrix-Domain, TelematikID, isEnsurance)
        Activate FP
      FP->FP: prüfe \nprovider-accesstoken
      FP->VZD: HTTPS Forward
        Activate VZD
      VZD- ->VZD: Föderationsliste\naktualisieren
      VZD- ->FP: status
        Deactivate VZD
      FP- ->R: HTTPS Forward
        Deactivate FP

    |||
    end

  |||
  R->C: status
    Deactivate R
  C->U: Messenger Service \nerfolgreich erstellt
    Deactivate C
  |||
end
|||
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>