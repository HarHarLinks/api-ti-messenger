<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2003px" preserveAspectRatio="none" style="width:1371px;height:2003px;background:#FFFFFF;" version="1.1" viewBox="0 0 1371 2003" width="1371px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="1991" style="stroke:#181818;stroke-width:0.5;" width="222" x="16" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="170" x="42" y="24.6855">Messenger-Service</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4" x="42" y="42.1357"> </text><rect fill="#F5F5F5" height="1991" style="stroke:#181818;stroke-width:0.5;" width="446" x="882" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="171" x="1017.5" y="24.6855">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4" x="1188.5" y="25.7842"> </text><rect fill="#DCDCDC" height="895.5859" style="stroke:#000000;stroke-width:1.0;" width="10" x="122" y="1034.0195"/><rect fill="#DCDCDC" height="824.7422" style="stroke:#000000;stroke-width:1.0;" width="10" x="556" y="98.3867"/><rect fill="#DCDCDC" height="46.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="561" y="815.7461"/><rect fill="#DCDCDC" height="814.3867" style="stroke:#000000;stroke-width:1.0;" width="10" x="556" y="1081.8359"/><rect fill="#DCDCDC" height="46.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="561" y="1552.9961"/><rect fill="none" height="776.6172" style="stroke:#000000;stroke-width:1.5;" width="950" x="404" y="153.5117"/><rect fill="none" height="739.1406" style="stroke:#000000;stroke-width:1.5;" width="930" x="414" y="183.9883"/><rect fill="none" height="529.6797" style="stroke:#000000;stroke-width:1.5;" width="910" x="424" y="386.4492"/><rect fill="none" height="390.7266" style="stroke:#000000;stroke-width:1.5;" width="494" x="434" y="518.4023"/><rect fill="#FFB6C1" height="66.7344" style="stroke:#000000;stroke-width:1.5;" width="419" x="444" y="548.8789"/><rect fill="none" height="180.625" style="stroke:#000000;stroke-width:1.5;" width="474" x="444" y="721.5039"/><rect fill="none" height="124.9531" style="stroke:#000000;stroke-width:1.5;" width="890" x="444" y="1134.2695"/><rect fill="#FFB6C1" height="216.0078" style="stroke:#000000;stroke-width:1.5;" width="788" x="10" y="1273.2227"/><rect fill="none" height="242.8438" style="stroke:#000000;stroke-width:1.5;" width="668" x="10" y="1621.3789"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="127" x2="127" y1="88.3867" y2="1954.6055"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="561" x2="561" y1="88.3867" y2="1954.6055"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="993" x2="993" y1="88.3867" y2="1954.6055"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1217" x2="1217" y1="88.3867" y2="1954.6055"/><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="20" y="48.9922"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="140" x="57" y="76.168">Messenger-Proxy</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="20" y="1953.6055"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="140" x="57" y="1980.7813">Messenger-Proxy</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="454" y="48.9922"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="176" x="473" y="76.168">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="454" y="1953.6055"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="176" x="473" y="1980.7813">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="886" y="48.9922"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="87" x="949.5" y="76.168">FHIR-Proxy</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="886" y="1953.6055"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="87" x="949.5" y="1980.7813">FHIR-Proxy</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1110" y="48.9922"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="114" x="1160" y="76.168">OAuth-Service</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1110" y="1953.6055"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="114" x="1160" y="1980.7813">OAuth-Service</text><rect fill="#DCDCDC" height="895.5859" style="stroke:#000000;stroke-width:1.0;" width="10" x="122" y="1034.0195"/><rect fill="#DCDCDC" height="824.7422" style="stroke:#000000;stroke-width:1.0;" width="10" x="556" y="98.3867"/><rect fill="#DCDCDC" height="46.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="561" y="815.7461"/><rect fill="#DCDCDC" height="814.3867" style="stroke:#000000;stroke-width:1.0;" width="10" x="556" y="1081.8359"/><rect fill="#DCDCDC" height="46.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="561" y="1552.9961"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1364" x="0" y="121.4492"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1364" y1="121.4492" y2="121.4492"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1364" y1="124.4492" y2="124.4492"/><rect fill="#EEEEEE" height="28.125" style="stroke:#000000;stroke-width:2.0;" width="98" x="633" y="108.3867"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="80" x="639" y="128.9961">scheduled</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4" x="719" y="129.6553"> </text><path d="M404,153.5117 L477,153.5117 L477,161.8633 L467,171.8633 L404,171.8633 L404,153.5117 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="776.6172" style="stroke:#000000;stroke-width:1.5;" width="950" x="404" y="153.5117"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="419" y="168.0068">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="492" y="173.2197">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="49" x="496" y="172.1211">alle 1h</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="545" y="173.2197">]</text><path d="M414,183.9883 L475,183.9883 L475,192.3398 L465,202.3398 L414,202.3398 L414,183.9883 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="739.1406" style="stroke:#000000;stroke-width:1.5;" width="930" x="414" y="183.9883"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="429" y="198.4834">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="490" y="203.6963">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="455" x="494" y="202.5977">HealthState_VZD=gesund ODER Alter_Föderationsliste&gt;=1h</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="949" y="203.6963">]</text><rect fill="none" height="46.4766" style="stroke:#000000;stroke-width:1.5;" width="876" x="451" y="232.4648"/><path d="M451,232.4648 L513,232.4648 L513,240.4648 L503,250.4648 L451,250.4648 L451,232.4648 " fill="#98FB98" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="464" y="247.96">ref</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="368" x="705" y="271.0742">Provider authentifizieren und Föderationsliste abrufen</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="414" x2="1344" y1="309.9414" y2="309.9414"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="419" y="327.6494">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="200" x="423" y="326.5508">HealthState_VZD!=gesund</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="623" y="327.6494">]</text><line style="stroke:#000000;stroke-width:1.0;" x1="566" x2="608" y1="358.4492" y2="358.4492"/><line style="stroke:#000000;stroke-width:1.0;" x1="608" x2="608" y1="358.4492" y2="371.4492"/><line style="stroke:#000000;stroke-width:1.0;" x1="567" x2="608" y1="371.4492" y2="371.4492"/><polygon fill="#000000" points="577,367.4492,567,371.4492,577,375.4492,573,371.4492" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="573" y="352.7139">1</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="395" x="586" y="352.7139">HealthStateCheck einleiten(HealthStateCheck_VZD=0)</text><path d="M424,386.4492 L497,386.4492 L497,394.8008 L487,404.8008 L424,404.8008 L424,386.4492 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="529.6797" style="stroke:#000000;stroke-width:1.5;" width="910" x="424" y="386.4492"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="439" y="400.9443">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="512" y="406.1572">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="316" x="516" y="405.0586">alle 5min UND HealthStateCheck_VZD&lt;=3</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="832" y="406.1572">]</text><rect fill="none" height="46.4766" style="stroke:#000000;stroke-width:1.5;" width="876" x="451" y="434.9258"/><path d="M451,434.9258 L513,434.9258 L513,442.9258 L503,452.9258 L451,452.9258 L451,434.9258 " fill="#98FB98" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="464" y="450.4209">ref</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="368" x="705" y="473.5352">Provider authentifizieren und Föderationsliste abrufen</text><path d="M434,518.4023 L495,518.4023 L495,526.7539 L485,536.7539 L434,536.7539 L434,518.4023 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="390.7266" style="stroke:#000000;stroke-width:1.5;" width="494" x="434" y="518.4023"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="449" y="532.8975">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="510" y="538.1104">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="196" x="514" y="537.0117">HealthState_VZD=gesund</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="710" y="538.1104">]</text><path d="M444,548.8789 L525,548.8789 L525,557.2305 L515,567.2305 L444,567.2305 L444,548.8789 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="66.7344" style="stroke:#000000;stroke-width:1.5;" width="419" x="444" y="548.8789"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="36" x="459" y="563.374">break</text><line style="stroke:#000000;stroke-width:1.0;" x1="566" x2="608" y1="594.6133" y2="594.6133"/><line style="stroke:#000000;stroke-width:1.0;" x1="608" x2="608" y1="594.6133" y2="607.6133"/><line style="stroke:#000000;stroke-width:1.0;" x1="567" x2="608" y1="607.6133" y2="607.6133"/><polygon fill="#000000" points="577,603.6133,567,607.6133,577,611.6133,573,607.6133" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="573" y="588.8779">2</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="265" x="586" y="588.8779">HealthStateCheck_VZD abbrechen()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="434" x2="928" y1="623.6133" y2="623.6133"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="439" y="641.3213">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="200" x="443" y="640.2227">HealthState_VZD!=gesund</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="643" y="641.3213">]</text><line style="stroke:#000000;stroke-width:1.0;" x1="566" x2="608" y1="693.5039" y2="693.5039"/><line style="stroke:#000000;stroke-width:1.0;" x1="608" x2="608" y1="693.5039" y2="706.5039"/><line style="stroke:#000000;stroke-width:1.0;" x1="567" x2="608" y1="706.5039" y2="706.5039"/><polygon fill="#000000" points="577,702.5039,567,706.5039,577,710.5039,573,706.5039" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="573" y="677.0771">3</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="235" x="586" y="666.3857">HealthStateCheck_VZD erhöhen</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="201" x="586" y="687.7686">(HealthStateCheck_VZD+1)</text><path d="M444,721.5039 L505,721.5039 L505,729.8555 L495,739.8555 L444,739.8555 L444,721.5039 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="180.625" style="stroke:#000000;stroke-width:1.5;" width="474" x="444" y="721.5039"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="459" y="735.999">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="520" y="741.2119">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="196" x="524" y="740.1133">HealthStateCheck_VZD=3</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="720" y="741.2119">]</text><polygon fill="#000000" points="780,768.3633,790,772.3633,780,776.3633,784,772.3633" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="566" x2="786" y1="772.3633" y2="772.3633"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="573" y="766.6279">4</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="189" x="586" y="766.6279">Incident-Event erzeugen()</text><line style="stroke:#000000;stroke-width:1.0;" x1="566" x2="613" y1="802.7461" y2="802.7461"/><line style="stroke:#000000;stroke-width:1.0;" x1="613" x2="613" y1="802.7461" y2="815.7461"/><line style="stroke:#000000;stroke-width:1.0;" x1="572" x2="613" y1="815.7461" y2="815.7461"/><polygon fill="#000000" points="582,811.7461,572,815.7461,582,819.7461,578,815.7461" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="578" y="797.0107">5</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="315" x="591" y="797.0107">letzte vorhandene Föderationsliste puffern()</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="571" x2="613" y1="861.1289" y2="861.1289"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="613" x2="613" y1="861.1289" y2="874.1289"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="566" x2="613" y1="874.1289" y2="874.1289"/><polygon fill="#000000" points="576,870.1289,566,874.1289,576,878.1289,572,874.1289" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="578" y="855.3936">6</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="114" x="591" y="855.3936">Föderationsliste</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1364" x="0" y="960.1914"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1364" y1="960.1914" y2="960.1914"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1364" y1="963.1914" y2="963.1914"/><rect fill="#EEEEEE" height="28.125" style="stroke:#000000;stroke-width:2.0;" width="100" x="632" y="947.1289"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="82" x="638" y="967.7383">on request</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4" x="720" y="968.3975"> </text><polygon fill="#000000" points="143,1030.0195,133,1034.0195,143,1038.0195,139,1034.0195" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="137" x2="287" y1="1034.0195" y2="1034.0195"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="1017.5928">7</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="114" x="162" y="1006.9014">Föderationsliste</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="103" x="162" y="1028.2842">aktualisieren()</text><polygon fill="#000000" points="544,1077.8359,554,1081.8359,544,1085.8359,548,1081.8359" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="132" x2="550" y1="1081.8359" y2="1081.8359"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="139" y="1076.1006">8</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="300" x="152" y="1076.1006">GET /I_internVerification(FLVersion_MP)</text><path d="M571,1047.0195 L571,1097.0195 L794,1097.0195 L794,1057.0195 L784,1047.0195 L571,1047.0195 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M784,1047.0195 L784,1057.0195 L794,1057.0195 L784,1047.0195 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="152" x="577" y="1068.6289">Schnittstelle wird nicht</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="202" x="577" y="1088.7539">durch die gematik spezifiziert</text><path d="M444,1134.2695 L505,1134.2695 L505,1142.6211 L495,1152.6211 L444,1152.6211 L444,1134.2695 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="124.9531" style="stroke:#000000;stroke-width:1.5;" width="890" x="444" y="1134.2695"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="459" y="1148.7646">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="520" y="1153.9775">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="444" x="524" y="1152.8789">HealthState_VZD=gesund UND Alter_Föderationsliste&gt;=1h</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="972" y="1153.9775">]</text><rect fill="none" height="46.4766" style="stroke:#000000;stroke-width:1.5;" width="876" x="451" y="1182.7461"/><path d="M451,1182.7461 L513,1182.7461 L513,1190.7461 L503,1200.7461 L451,1200.7461 L451,1182.7461 " fill="#98FB98" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="464" y="1198.2412">ref</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="368" x="705" y="1221.3555">Provider authentifizieren und Föderationsliste abrufen</text><path d="M10,1273.2227 L91,1273.2227 L91,1281.5742 L81,1291.5742 L10,1291.5742 L10,1273.2227 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="216.0078" style="stroke:#000000;stroke-width:1.5;" width="788" x="10" y="1273.2227"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="36" x="25" y="1287.7178">break</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="106" y="1292.9307">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="338" x="110" y="1291.832">Alter_Föderationsliste&gt;TTL_Föderationsliste</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="448" y="1292.9307">]</text><polygon fill="#000000" points="143,1320.082,133,1324.082,143,1328.082,139,1324.082" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="137" x2="555" y1="1324.082" y2="1324.082"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="379" y="1318.3467">9</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="157" x="392" y="1318.3467">FLStatus_RD=veraltet</text><polygon fill="#000000" points="789,1355.4648,799,1359.4648,789,1363.4648,793,1359.4648" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="566" x2="795" y1="1359.4648" y2="1359.4648"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="573" y="1353.7295">10</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="189" x="595" y="1353.7295">Incident-Event erzeugen()</text><line style="stroke:#000000;stroke-width:1.0;" x1="132" x2="174" y1="1394.8477" y2="1394.8477"/><line style="stroke:#000000;stroke-width:1.0;" x1="174" x2="174" y1="1394.8477" y2="1407.8477"/><line style="stroke:#000000;stroke-width:1.0;" x1="133" x2="174" y1="1407.8477" y2="1407.8477"/><polygon fill="#000000" points="143,1403.8477,133,1407.8477,143,1411.8477,139,1407.8477" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="139" y="1389.1123">11</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="388" x="161" y="1389.1123">unterbinde Registrierungsdienst-Requests(Dauer=1h)</text><line style="stroke:#000000;stroke-width:1.0;" x1="132" x2="174" y1="1443.2305" y2="1443.2305"/><line style="stroke:#000000;stroke-width:1.0;" x1="174" x2="174" y1="1443.2305" y2="1456.2305"/><line style="stroke:#000000;stroke-width:1.0;" x1="133" x2="174" y1="1456.2305" y2="1456.2305"/><polygon fill="#000000" points="143,1452.2305,133,1456.2305,143,1460.2305,139,1456.2305" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="139" y="1437.4951">12</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="382" x="161" y="1437.4951">blockiere Kommunikation zu anderen Homeservern()</text><line style="stroke:#000000;stroke-width:1.0;" x1="566" x2="613" y1="1539.9961" y2="1539.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="613" x2="613" y1="1539.9961" y2="1552.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="572" x2="613" y1="1552.9961" y2="1552.9961"/><polygon fill="#000000" points="582,1548.9961,572,1552.9961,582,1556.9961,578,1552.9961" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="578" y="1523.5693">13</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="153" x="600" y="1512.8779">vergleiche Versionen</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="237" x="600" y="1534.2607">(FLVersion_MP, FLVersion_RD)</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="571" x2="613" y1="1598.3789" y2="1598.3789"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="613" x2="613" y1="1598.3789" y2="1611.3789"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="566" x2="613" y1="1611.3789" y2="1611.3789"/><polygon fill="#000000" points="576,1607.3789,566,1611.3789,576,1615.3789,572,1611.3789" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="578" y="1592.6436">14</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="172" x="600" y="1592.6436">Vergleichsergebnis_RD</text><path d="M10,1621.3789 L71,1621.3789 L71,1629.7305 L61,1639.7305 L10,1639.7305 L10,1621.3789 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="242.8438" style="stroke:#000000;stroke-width:1.5;" width="668" x="10" y="1621.3789"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="1635.874">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="86" y="1641.0869">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="260" x="90" y="1639.9883">Vergleichsergebnis_RD=identisch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="350" y="1641.0869">]</text><polygon fill="#000000" points="143,1693.2383,133,1697.2383,143,1701.2383,139,1697.2383" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="137" x2="555" y1="1697.2383" y2="1697.2383"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="375" y="1691.5029">15</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="152" x="397" y="1691.5029">FLStatus_MP=aktuell</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="678" y1="1731.2383" y2="1731.2383"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="15" y="1748.9463">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="264" x="19" y="1747.8477">Vergleichsergebnis_RD!=identisch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="283" y="1748.9463">]</text><polygon fill="#000000" points="143,1775.7461,133,1779.7461,143,1783.7461,139,1779.7461" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="137" x2="555" y1="1779.7461" y2="1779.7461"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="274" y="1774.0107">16</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="253" x="296" y="1774.0107">Föderationsliste, x5c-Zertifikatsliste</text><rect fill="none" height="46.4766" style="stroke:#000000;stroke-width:1.5;" width="256" x="17" y="1787.7461"/><path d="M17,1787.7461 L79,1787.7461 L79,1795.7461 L69,1805.7461 L17,1805.7461 L17,1787.7461 " fill="#98FB98" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="30" y="1803.2412">ref</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="248" x="21" y="1826.3555">Signatur der Föderationsliste prüfen</text><!--MD5=[8af28602ae9bfcd3be1827808fc66e84]
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}

autonumber

box <size:18>Messenger-Service\n #WhiteSmoke
participant MP as "Messenger-Proxy"
end box
participant RD as "Registrierungs-Dienst"
box <size:18>VZD-FHIR-Directory</size> #WhiteSmoke
  participant FP as "FHIR-Proxy"
  participant AS as "OAuth-Service"
end box

== <size:16>scheduled</size> ==

loop#LightGrey <size:16>alle 1h</size>
  alt#LightGrey <size:16>HealthState_VZD=gesund ODER Alter_Föderationsliste>=1h</size>
  activate RD
  |||
  ref over AS, FP, RD
    <size:16>Provider authentifizieren und Föderationsliste abrufen</size>
  end ref
  |||

  else <size:16>HealthState_VZD!=gesund</size>
    RD->RD: HealthStateCheck einleiten(HealthStateCheck_VZD=0)
    loop#LightGrey <size:16>alle 5min UND HealthStateCheck_VZD<=3</size>
      |||
      ref over AS, FP, RD
        <size:16>Provider authentifizieren und Föderationsliste abrufen</size>
      end ref
      |||
      alt#LightGrey <size:16>HealthState_VZD=gesund</size>
        break#LightGrey #LightPink
          RD->RD: HealthStateCheck_VZD abbrechen()
        end
      else <size:16>HealthState_VZD!=gesund</size>
        RD->RD: HealthStateCheck_VZD erhöhen\n(HealthStateCheck_VZD+1)
        alt#LightGrey <size:16>HealthStateCheck_VZD=3</size>
          RD ->?: Incident-Event erzeugen()
          RD->RD++: letzte vorhandene Föderationsliste puffern()
          return Föderationsliste
        |||
        end
      end
    end
    deactivate RD
  end
end

== <size:16>on request</size> ==

MP <-?: Föderationsliste \naktualisieren()
activate MP
MP->RD: GET /I_internVerification(FLVersion_MP)
note right: <size:16>Schnittstelle wird nicht \n<size:16>durch die gematik spezifiziert</size>
|||
  Activate RD

alt#LightGrey <size:16>HealthState_VZD=gesund UND Alter_Föderationsliste>=1h </size>

  |||
  ref over AS, FP, RD
    <size:16>Provider authentifizieren und Föderationsliste abrufen</size>
  end ref
  |||

end

break#LightGrey #LightPink <size:16>Alter_Föderationsliste>TTL_Föderationsliste</size>
  RD- ->MP: FLStatus_RD=veraltet
  RD ->?: Incident-Event erzeugen()
  MP->MP: unterbinde Registrierungsdienst-Requests(Dauer=1h)
  MP->MP: blockiere Kommunikation zu anderen Homeservern()
  |||
end

  RD->RD++: vergleiche Versionen\n(FLVersion_MP, FLVersion_RD)
  return Vergleichsergebnis_RD

  alt#LightGrey <size:16>Vergleichsergebnis_RD=identisch</size>
    |||
    RD- ->MP: FLStatus_MP=aktuell
    |||

  else <size:16>Vergleichsergebnis_RD!=identisch</size>
    RD- ->MP: Föderationsliste, x5c-Zertifikatsliste
    ref over MP
      <size:16>Signatur der Föderationsliste prüfen</size>
    end ref
    |||
  end
  |||
  Deactivate RD
  MP-[hidden]> MP
  deactivate MP
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>