<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2688px" preserveAspectRatio="none" style="width:1522px;height:2688px;background:#FFFFFF;" version="1.1" viewBox="0 0 1522 2688" width="1522px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="2676.3203" style="stroke:#181818;stroke-width:0.5;" width="405" x="286.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="19" font-weight="bold" lengthAdjust="spacing" textLength="85" x="444.5" y="25.7236">Endgerät</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4" x="529.5" y="27.042"> </text><rect fill="#DCDCDC" height="2239.4531" style="stroke:#000000;stroke-width:1.0;" width="10" x="397" y="254.5547"/><rect fill="#DCDCDC" height="252.75" style="stroke:#000000;stroke-width:1.0;" width="10" x="600.5" y="476.4297"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="867.5" y="511.8125"/><rect fill="#DCDCDC" height="47.8164" style="stroke:#000000;stroke-width:1.0;" width="10" x="1060.5" y="332.8477"/><rect fill="#DCDCDC" height="1231.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="1060.5" y="824.9453"/><rect fill="#DCDCDC" height="237.3477" style="stroke:#000000;stroke-width:1.0;" width="10" x="1060.5" y="2221.2773"/><rect fill="#DCDCDC" height="323.5156" style="stroke:#000000;stroke-width:1.0;" width="10" x="1409.5" y="441.0469"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="1409.5" y="860.3281"/><rect fill="#F0F8FF" height="2369.6953" style="stroke:#000000;stroke-width:1.5;" width="1506.5" x="10" y="157.3125"/><rect fill="#ADD8E6" height="1280.6406" style="stroke:#000000;stroke-width:1.5;" width="1486.5" x="20" y="269.5547"/><rect fill="#FFE4E1" height="82.6016" style="stroke:#000000;stroke-width:1.5;" width="667.5" x="30" y="587.1953"/><rect fill="#ADD8E6" height="483.9531" style="stroke:none;stroke-width:1.0;" width="1486.5" x="20" y="1066.2422"/><rect fill="#FFE4E1" height="117.9844" style="stroke:#000000;stroke-width:1.5;" width="1146.5" x="30" y="1589.1953"/><rect fill="#FFE4E1" height="82.6016" style="stroke:#000000;stroke-width:1.5;" width="1146.5" x="30" y="1914.3281"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="124" x2="124" y1="115.3125" y2="2569.0078"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="401.5" x2="401.5" y1="115.3125" y2="2569.0078"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="605.5" x2="605.5" y1="115.3125" y2="2569.0078"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="872.5" x2="872.5" y1="115.3125" y2="2569.0078"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1065.5" x2="1065.5" y1="115.3125" y2="2569.0078"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1414.5" x2="1414.5" y1="115.3125" y2="2569.0078"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="162" x="40" y="85.7617">Akteur in der Rolle</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="73.5" y="110.918">Org-Admin</text><ellipse cx="124" cy="13.5" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M124,21.5 L124,48.5 M111,29.5 L137,29.5 M124,48.5 L111,63.5 M124,48.5 L137,63.5 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="162" x="40" y="2588.7695">Akteur in der Rolle</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="73.5" y="2613.9258">Org-Admin</text><ellipse cx="124" cy="2626.8203" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M124,2634.8203 L124,2661.8203 M111,2642.8203 L137,2642.8203 M124,2661.8203 L111,2676.8203 M124,2661.8203 L137,2676.8203 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#EFEFFF" height="64.3125" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="223" x="290.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="116" x="341" y="77.7617">Frontend des</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="209" x="297.5" y="102.918">Registrierungs-Dienstes</text><rect fill="#EFEFFF" height="64.3125" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="223" x="290.5" y="2568.0078"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="116" x="341" y="2595.7695">Frontend des</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="209" x="297.5" y="2620.9258">Registrierungs-Dienstes</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="523.5" y="75.1563"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="115" x="548" y="102.918">Authenticator</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="523.5" y="2568.0078"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="115" x="548" y="2595.7695">Authenticator</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="790.5" y="75.1563"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="89" x="828" y="102.918">Konnektor</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="790.5" y="2568.0078"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="89" x="828" y="2595.7695">Konnektor</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="202" x="964.5" y="75.1563"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="188" x="971.5" y="102.918">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="202" x="964.5" y="2568.0078"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="188" x="971.5" y="2595.7695">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="64.3125" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="1332.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="76" x="1373.5" y="77.7617">zentraler</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="1367" y="102.918">IDP-Dienst</text><rect fill="#EFEFFF" height="64.3125" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="164" x="1332.5" y="2568.0078"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="76" x="1373.5" y="2595.7695">zentraler</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="95" x="1367" y="2620.9258">IDP-Dienst</text><rect fill="#DCDCDC" height="2239.4531" style="stroke:#000000;stroke-width:1.0;" width="10" x="397" y="254.5547"/><rect fill="#DCDCDC" height="252.75" style="stroke:#000000;stroke-width:1.0;" width="10" x="600.5" y="476.4297"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="867.5" y="511.8125"/><rect fill="#DCDCDC" height="47.8164" style="stroke:#000000;stroke-width:1.0;" width="10" x="1060.5" y="332.8477"/><rect fill="#DCDCDC" height="1231.3672" style="stroke:#000000;stroke-width:1.0;" width="10" x="1060.5" y="824.9453"/><rect fill="#DCDCDC" height="237.3477" style="stroke:#000000;stroke-width:1.0;" width="10" x="1060.5" y="2221.2773"/><rect fill="#DCDCDC" height="323.5156" style="stroke:#000000;stroke-width:1.0;" width="10" x="1409.5" y="441.0469"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="1409.5" y="860.3281"/><path d="M10,157.3125 L71,157.3125 L71,165.6641 L61,175.6641 L10,175.6641 L10,157.3125 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="2369.6953" style="stroke:#000000;stroke-width:1.5;" width="1506.5" x="10" y="157.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="171.8076">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="86" y="177.0205">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="437" x="90" y="175.9219">Organisation nicht am Registrierungs-Dienst authentisiert</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="527" y="177.0205">]</text><polygon fill="#000000" points="385,250.5547,395,254.5547,385,258.5547,389,254.5547" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="124" x2="391" y1="254.5547" y2="254.5547"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="131" y="238.1279">1</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="177" x="144" y="227.4365">Organisation verifizieren</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="166" x="144" y="248.8193">(Verfahren auswählen)</text><path d="M20,269.5547 L81,269.5547 L81,277.9063 L71,287.9063 L20,287.9063 L20,269.5547 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1280.6406" style="stroke:#000000;stroke-width:1.5;" width="1486.5" x="20" y="269.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="35" y="284.0498">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="96" y="289.2627">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="126" x="100" y="288.1641">OpenID Connect</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="226" y="289.2627">]</text><polygon fill="#000000" points="1048.5,328.8477,1058.5,332.8477,1048.5,336.8477,1052.5,332.8477" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="407" x2="1054.5" y1="332.8477" y2="332.8477"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="414" y="327.1123">2</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="148" x="427" y="327.1123">POST I_Registration</text><path d="M1075,298.0313 L1075,348.0313 L1298,348.0313 L1298,308.0313 L1288,298.0313 L1075,298.0313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1288,298.0313 L1288,308.0313 L1298,308.0313 L1288,298.0313 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="152" x="1081" y="319.6406">Schnittstelle wird nicht</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="202" x="1081" y="339.7656">durch die gematik spezifiziert</text><polygon fill="#000000" points="418,376.6641,408,380.6641,418,384.6641,414,380.6641" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="412" x2="1064.5" y1="380.6641" y2="380.6641"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="764.5" y="374.9287">3</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="281" x="777.5" y="374.9287">Redirect to IDP Authorization Endpoint</text><polygon fill="#000000" points="1397.5,437.0469,1407.5,441.0469,1397.5,445.0469,1401.5,441.0469" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="407" x2="1403.5" y1="441.0469" y2="441.0469"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="414" y="435.3115">4</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="109" x="427" y="435.3115">GET /authorize</text><polygon fill="#000000" points="621.5,472.4297,611.5,476.4297,621.5,480.4297,617.5,476.4297" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="615.5" x2="1408.5" y1="476.4297" y2="476.4297"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="1212.5" y="470.6943">5</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="177" x="1225.5" y="470.6943">Authentication challenge</text><polygon fill="#000000" points="855.5,507.8125,865.5,511.8125,855.5,515.8125,859.5,511.8125" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="610.5" x2="861.5" y1="511.8125" y2="511.8125"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="617.5" y="506.0771">6</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="148" x="630.5" y="506.0771">ExternalAuthenticate</text><polygon fill="#000000" points="621.5,543.1953,611.5,547.1953,621.5,551.1953,617.5,547.1953" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="615.5" x2="871.5" y1="547.1953" y2="547.1953"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="632.5" y="541.46">7</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="220" x="645.5" y="541.46">ExternalAuthenticateResponse</text><path d="M30,587.1953 L95,587.1953 L95,595.5469 L85,605.5469 L30,605.5469 L30,587.1953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="82.6016" style="stroke:#000000;stroke-width:1.5;" width="667.5" x="30" y="587.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="45" y="601.6904">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="110" y="605.6455">[</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="59" x="114" y="604.7666">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="173" y="605.6455">]</text><polygon fill="#000000" points="135,632.7969,125,636.7969,135,640.7969,131,636.7969" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="129" x2="599.5" y1="636.7969" y2="636.7969"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="385.5" y="631.0615">8</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="195" x="398.5" y="631.0615">SMC-B nicht freigeschaltet</text><polygon fill="#000000" points="1397.5,725.1797,1407.5,729.1797,1397.5,733.1797,1401.5,729.1797" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="605.5" x2="1403.5" y1="729.1797" y2="729.1797"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="612.5" y="723.4443">9</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="175" x="625.5" y="723.4443">Authentication response</text><polygon fill="#000000" points="418,760.5625,408,764.5625,418,768.5625,414,764.5625" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="412" x2="1413.5" y1="764.5625" y2="764.5625"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1309.5" y="758.8271">10</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="76" x="1331.5" y="758.8271">auth_code</text><polygon fill="#000000" points="1048.5,820.9453,1058.5,824.9453,1048.5,828.9453,1052.5,824.9453" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="407" x2="1054.5" y1="824.9453" y2="824.9453"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="414" y="819.21">11</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="196" x="436" y="819.21">POST /register(auth_code)</text><polygon fill="#000000" points="1397.5,856.3281,1407.5,860.3281,1397.5,864.3281,1401.5,860.3281" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="1070.5" x2="1403.5" y1="860.3281" y2="860.3281"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1077.5" y="854.5928">12</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="251" x="1099.5" y="854.5928">POST {tokenEndpoint}(auth_code)</text><polygon fill="#000000" points="1081.5,891.7109,1071.5,895.7109,1081.5,899.7109,1077.5,895.7109" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1075.5" x2="1413.5" y1="895.7109" y2="895.7109"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1324.5" y="889.9756">13</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="61" x="1346.5" y="889.9756">id_token</text><line style="stroke:#000000;stroke-width:1.0;" x1="1070.5" x2="1112.5" y1="1020.2422" y2="1020.2422"/><line style="stroke:#000000;stroke-width:1.0;" x1="1112.5" x2="1112.5" y1="1020.2422" y2="1033.2422"/><line style="stroke:#000000;stroke-width:1.0;" x1="1071.5" x2="1112.5" y1="1033.2422" y2="1033.2422"/><polygon fill="#000000" points="1081.5,1029.2422,1071.5,1033.2422,1081.5,1037.2422,1077.5,1033.2422" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1077.5" y="982.4326">14</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="74" x="1099.5" y="950.3584">enthaltene</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="135" x="1099.5" y="971.7412">ProfessionOID auf</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="144" x="1099.5" y="993.124">gültige Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="47" x="1099.5" y="1014.5068">prüfen</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1506.5" y1="1067.2422" y2="1067.2422"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="25" y="1084.9502">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="117" x="29" y="1083.8516">KIM - Verfahren</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="146" y="1084.9502">]</text><polygon fill="#000000" points="1048.5,1136.75,1058.5,1140.75,1048.5,1144.75,1052.5,1140.75" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="124" x2="1054.5" y1="1140.75" y2="1140.75"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="131" y="1135.0146">15</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="463" x="153" y="1135.0146">KIM-Adresse in Eingabemaske eintragen (POST I_Registration)</text><line style="stroke:#000000;stroke-width:1.0;" x1="1070.5" x2="1112.5" y1="1197.5156" y2="1197.5156"/><line style="stroke:#000000;stroke-width:1.0;" x1="1112.5" x2="1112.5" y1="1197.5156" y2="1210.5156"/><line style="stroke:#000000;stroke-width:1.0;" x1="1071.5" x2="1112.5" y1="1210.5156" y2="1210.5156"/><polygon fill="#000000" points="1081.5,1206.5156,1071.5,1210.5156,1081.5,1214.5156,1077.5,1210.5156" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1077.5" y="1181.0889">16</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="211" x="1099.5" y="1170.3975">Abfrage des LDAP-Directory</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="188" x="1099.5" y="1191.7803">Eintrags zur KIM-Adresse</text><line style="stroke:#000000;stroke-width:1.0;" x1="1070.5" x2="1112.5" y1="1292.2813" y2="1292.2813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1112.5" x2="1112.5" y1="1292.2813" y2="1305.2813"/><line style="stroke:#000000;stroke-width:1.0;" x1="1071.5" x2="1112.5" y1="1305.2813" y2="1305.2813"/><polygon fill="#000000" points="1081.5,1301.2813,1071.5,1305.2813,1081.5,1309.2813,1077.5,1305.2813" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1077.5" y="1275.8545">17</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="204" x="1099.5" y="1265.1631">Speicherung der telematikId</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="166" x="1099.5" y="1286.5459">und der professionOID</text><line style="stroke:#000000;stroke-width:1.0;" x1="1070.5" x2="1112.5" y1="1408.4297" y2="1408.4297"/><line style="stroke:#000000;stroke-width:1.0;" x1="1112.5" x2="1112.5" y1="1408.4297" y2="1421.4297"/><line style="stroke:#000000;stroke-width:1.0;" x1="1071.5" x2="1112.5" y1="1421.4297" y2="1421.4297"/><polygon fill="#000000" points="1081.5,1417.4297,1071.5,1421.4297,1081.5,1425.4297,1077.5,1421.4297" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1077.5" y="1381.3115">18</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="135" x="1099.5" y="1359.9287">ProfessionOID auf</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="144" x="1099.5" y="1381.3115">gültige Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="47" x="1099.5" y="1402.6943">prüfen</text><polygon fill="#000000" points="135,1477.8125,125,1481.8125,135,1485.8125,131,1481.8125" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="129" x2="1059.5" y1="1481.8125" y2="1481.8125"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="865.5" y="1476.0771">19</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="166" x="887.5" y="1476.0771">KIM Nachricht mit URL</text><polygon fill="#000000" points="1048.5,1513.1953,1058.5,1517.1953,1048.5,1521.1953,1052.5,1517.1953" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="124" x2="1054.5" y1="1517.1953" y2="1517.1953"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="131" y="1511.46">20</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="210" x="153" y="1511.46">URL in KIM-Nachricht öffnen</text><path d="M30,1589.1953 L95,1589.1953 L95,1597.5469 L85,1607.5469 L30,1607.5469 L30,1589.1953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="117.9844" style="stroke:#000000;stroke-width:1.5;" width="1146.5" x="30" y="1589.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="45" y="1603.6904">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="110" y="1607.6455">[</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="59" x="114" y="1606.7666">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="173" y="1607.6455">]</text><polygon fill="#000000" points="418,1634.7969,408,1638.7969,418,1642.7969,414,1638.7969" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="412" x2="1059.5" y1="1638.7969" y2="1638.7969"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="755.5" y="1633.0615">21</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="276" x="777.5" y="1633.0615">keine gültige ProfessionOID gefunden</text><polygon fill="#000000" points="135,1670.1797,125,1674.1797,135,1678.1797,131,1674.1797" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="129" x2="396" y1="1674.1797" y2="1674.1797"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="141" y="1668.4443">22</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="227" x="163" y="1668.4443">Authentisierung fehlgeschlagen</text><line style="stroke:#000000;stroke-width:1.0;" x1="1070.5" x2="1112.5" y1="1787.9453" y2="1787.9453"/><line style="stroke:#000000;stroke-width:1.0;" x1="1112.5" x2="1112.5" y1="1787.9453" y2="1800.9453"/><line style="stroke:#000000;stroke-width:1.0;" x1="1071.5" x2="1112.5" y1="1800.9453" y2="1800.9453"/><polygon fill="#000000" points="1081.5,1796.9453,1071.5,1800.9453,1081.5,1804.9453,1077.5,1800.9453" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1077.5" y="1771.5186">23</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="92" x="1099.5" y="1760.8271">Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="111" x="1099.5" y="1782.21">authentifizieren</text><line style="stroke:#000000;stroke-width:1.0;" x1="1070.5" x2="1112.5" y1="1861.3281" y2="1861.3281"/><line style="stroke:#000000;stroke-width:1.0;" x1="1112.5" x2="1112.5" y1="1861.3281" y2="1874.3281"/><line style="stroke:#000000;stroke-width:1.0;" x1="1071.5" x2="1112.5" y1="1874.3281" y2="1874.3281"/><polygon fill="#000000" points="1081.5,1870.3281,1071.5,1874.3281,1081.5,1878.3281,1077.5,1874.3281" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1077.5" y="1855.5928">24</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="303" x="1099.5" y="1855.5928">Prüfung auf existierenden Admin Account</text><path d="M30,1914.3281 L95,1914.3281 L95,1922.6797 L85,1932.6797 L30,1932.6797 L30,1914.3281 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="82.6016" style="stroke:#000000;stroke-width:1.5;" width="1146.5" x="30" y="1914.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="45" y="1928.8232">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="110" y="1932.7783">[</text><text fill="#000000" font-family="sans-serif" font-size="15" font-weight="bold" lengthAdjust="spacing" textLength="59" x="114" y="1931.8994">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="173" y="1932.7783">]</text><polygon fill="#000000" points="135,1959.9297,125,1963.9297,135,1967.9297,131,1963.9297" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="129" x2="1059.5" y1="1963.9297" y2="1963.9297"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="493.5" y="1958.1943">25</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="538" x="515.5" y="1958.1943">Organisation bereits authentifiziert und ein Admin-Account existiert bereits</text><polygon fill="#000000" points="418,2052.3125,408,2056.3125,418,2060.3125,414,2056.3125" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="412" x2="1064.5" y1="2056.3125" y2="2056.3125"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="994.5" y="2050.5771">26</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="42" x="1016.5" y="2050.5771">status</text><polygon fill="#000000" points="135,2087.6953,125,2091.6953,135,2095.6953,131,2091.6953" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="129" x2="396" y1="2091.6953" y2="2091.6953"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="192" y="2085.96">27</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="176" x="214" y="2085.96">Verifizierung erfolgreich</text><polygon fill="#000000" points="385,2169.4609,395,2173.4609,385,2177.4609,389,2173.4609" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="124" x2="391" y1="2173.4609" y2="2173.4609"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="131" y="2157.0342">28</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="173" x="153" y="2146.3428">Admin Account anlegen</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="163" x="153" y="2167.7256">(Passwort + 2. Faktor)</text><polygon fill="#000000" points="1048.5,2217.2773,1058.5,2221.2773,1048.5,2225.2773,1052.5,2221.2773" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="407" x2="1054.5" y1="2221.2773" y2="2221.2773"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="414" y="2215.542">29</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="449" x="436" y="2215.542">POST I_Registration (Admin-Account Credentials + 2. Faktor)</text><path d="M1075,2186.4609 L1075,2236.4609 L1298,2236.4609 L1298,2196.4609 L1288,2186.4609 L1075,2186.4609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1288,2186.4609 L1288,2196.4609 L1298,2196.4609 L1288,2186.4609 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="152" x="1081" y="2208.0703">Schnittstelle wird nicht</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="202" x="1081" y="2228.1953">durch die gematik spezifiziert</text><line style="stroke:#000000;stroke-width:1.0;" x1="1070.5" x2="1112.5" y1="2294.0938" y2="2294.0938"/><line style="stroke:#000000;stroke-width:1.0;" x1="1112.5" x2="1112.5" y1="2294.0938" y2="2307.0938"/><line style="stroke:#000000;stroke-width:1.0;" x1="1071.5" x2="1112.5" y1="2307.0938" y2="2307.0938"/><polygon fill="#000000" points="1081.5,2303.0938,1071.5,2307.0938,1081.5,2311.0938,1077.5,2307.0938" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1077.5" y="2288.3584">30</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="185" x="1099.5" y="2288.3584">Credentials-Policy prüfen</text><line style="stroke:#000000;stroke-width:1.0;" x1="1070.5" x2="1112.5" y1="2410.2422" y2="2410.2422"/><line style="stroke:#000000;stroke-width:1.0;" x1="1112.5" x2="1112.5" y1="2410.2422" y2="2423.2422"/><line style="stroke:#000000;stroke-width:1.0;" x1="1071.5" x2="1112.5" y1="2423.2422" y2="2423.2422"/><polygon fill="#000000" points="1081.5,2419.2422,1071.5,2423.2422,1081.5,2427.2422,1077.5,2423.2422" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="1077.5" y="2383.124">31</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="144" x="1099.5" y="2361.7412">Org-Admin Account</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="144" x="1099.5" y="2383.124">für die Organisation</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="57" x="1099.5" y="2404.5068">anlegen</text><polygon fill="#000000" points="418,2454.625,408,2458.625,418,2462.625,414,2458.625" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="412" x2="1064.5" y1="2458.625" y2="2458.625"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="994.5" y="2452.8896">32</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="42" x="1016.5" y="2452.8896">status</text><polygon fill="#000000" points="135,2490.0078,125,2494.0078,135,2498.0078,131,2494.0078" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="129" x2="401" y1="2494.0078" y2="2494.0078"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="18" x="247" y="2488.2725">33</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="126" x="269" y="2488.2725">Account angelegt</text><!--MD5=[66922c6250087561fe56d5bb9db9a3a8]
@startuml "Authentisieren einer Organisation am TI-Messenger-Dienst"
skinparam sequenceMessageAlign direction
skinparam WrapWidth 300
skinparam minClassWidth 150
skinparam BoxPadding 1
scale max 2048 width
autonumber

skinparam sequence {
  ArrowColor black
  ArrowFontSize 17
  ActorBorderColor black
  LifeLineBorderColor black
  LifeLineBackgroundColor Gainsboro

  ParticipantBorderColor Motivation
  ParticipantBackgroundColor Motivation
  ParticipantFontSize 20
  ParticipantFontColor black
  ParticipantBorderColor Black
  ParticipantBackgroundColor MOTIVATION

  ActorBackgroundColor Gainsboro
  ActorFontColor black
  ActorFontSize 20
}

actor oa as "Akteur in der Rolle\nOrg-Admin"
  box <size:19>Endgerät</size> #WhiteSmoke
  participant wb as "Frontend des \nRegistrierungs-Dienstes"
  participant au as "Authenticator"
  end box
participant ko as "Konnektor"
participant rd as "Registrierungs-Dienst"
participant ip as "zentraler \nIDP-Dienst"



|||
alt#LightGrey #AliceBlue <size:16>Organisation nicht am Registrierungs-Dienst authentisiert</size>
|||
      oa -> wb: Organisation verifizieren \n(Verfahren auswählen)
      alt#LightGrey #LightBlue <size:16>OpenID Connect</size>
          activate wb
        wb -> rd:POST I_Registration
        note right: <size:16>Schnittstelle wird nicht \n<size:16>durch die gematik spezifiziert</size>
          activate rd
        rd - -> wb: Redirect to IDP Authorization Endpoint
          deactivate rd
        |||
        wb -> ip: GET /authorize
        activate ip
        ip -> au: Authentication challenge
        activate au
        au -> ko: ExternalAuthenticate
          activate ko
        ko - -> au: ExternalAuthenticateResponse
        |||
          deactivate ko

      opt #MistyRose <size:15>Abbruch</size>
        au -> oa: SMC-B nicht freigeschaltet
        |||
      end
        |||
        au - ->ip: Authentication response
          deactivate au
        ip - -> wb: auth_code
          deactivate ip
        |||
        wb -> rd: POST /register(auth_code)
          activate rd
        rd -> ip: POST {tokenEndpoint}(auth_code)
          activate ip
        ip - -> rd: id_token
          deactivate ip
        |||
        rd -> rd: enthaltene \nProfessionOID auf \ngültige Organisation \nprüfen
        |||
      else <size:16>KIM - Verfahren</size>
        |||
        oa -> rd: KIM-Adresse in Eingabemaske eintragen (POST I_Registration)
        rd -> rd: Abfrage des LDAP-Directory\nEintrags zur KIM-Adresse
        |||
        rd -> rd: Speicherung der telematikId\nund der professionOID
        |||
        rd -> rd: ProfessionOID auf\ngültige Organisation\nprüfen
        |||
        rd -> oa: KIM Nachricht mit URL
        oa -> rd: URL in KIM-Nachricht öffnen
        |||
      end
      |||

    opt #MistyRose <size:15>Abbruch</size>
      rd -> wb: keine gültige ProfessionOID gefunden
      wb -> oa: Authentisierung fehlgeschlagen
      |||
    end

      |||
      rd-> rd: Organisation \nauthentifizieren
      |||
      rd -> rd : Prüfung auf existierenden Admin Account
      |||
        opt #MistyRose <size:15>Abbruch</size>
         rd -> oa: Organisation bereits authentifiziert und ein Admin-Account existiert bereits
         |||
        end
      |||
      rd - -> wb: status
        deactivate rd
      wb - -> oa: Verifizierung erfolgreich
      |||
      oa -> wb: Admin Account anlegen \n(Passwort + 2. Faktor)
      wb -> rd: POST I_Registration (Admin-Account Credentials + 2. Faktor)
      note right: <size:16>Schnittstelle wird nicht \n<size:16>durch die gematik spezifiziert</size>
        activate rd
      |||
      rd -> rd: Credentials-Policy prüfen
      |||
      rd -> rd: Org-Admin Account\nfür die Organisation \nanlegen
      rd - -> wb: status
       deactivate rd
      wb - -> oa: Account angelegt
       deactivate wb
      |||
end
|||
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>