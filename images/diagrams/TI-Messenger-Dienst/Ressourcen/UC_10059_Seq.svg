<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2529px" preserveAspectRatio="none" style="width:1839px;height:2529px;background:#FFFFFF;" version="1.1" viewBox="0 0 1839 2529" width="1839px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="2517.0645" style="stroke:#181818;stroke-width:0.5;" width="223" x="259.5" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="84" x="329" y="23.4023">Endgerät</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4" x="329" y="39.7676"> </text><rect fill="#F5F5F5" height="2517.0645" style="stroke:#181818;stroke-width:0.5;" width="670" x="744" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="188" x="983" y="23.4023">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4" x="1171" y="24.457"> </text><rect fill="#F5F5F5" height="2517.0645" style="stroke:#181818;stroke-width:0.5;" width="252" x="1426" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="242" x="1429" y="23.4023">Ti-Messenger-Fachdienst</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4" x="1671" y="24.457"> </text><rect fill="#DCDCDC" height="2084.6738" style="stroke:#000000;stroke-width:1.0;" width="10" x="366" y="318.2813"/><rect fill="#DCDCDC" height="216.1289" style="stroke:#000000;stroke-width:1.0;" width="10" x="850" y="1675.7891"/><rect fill="#DCDCDC" height="216.1289" style="stroke:#000000;stroke-width:1.0;" width="10" x="850" y="2055.8047"/><rect fill="#DCDCDC" height="380.793" style="stroke:#000000;stroke-width:1.0;" width="10" x="1074" y="1078.2656"/><rect fill="#DCDCDC" height="81.043" style="stroke:#000000;stroke-width:1.0;" width="10" x="1298" y="1776.8535"/><rect fill="#DCDCDC" height="81.043" style="stroke:#000000;stroke-width:1.0;" width="10" x="1298" y="2156.8691"/><rect fill="#DCDCDC" height="112.8975" style="stroke:#000000;stroke-width:1.0;" width="10" x="1547" y="656.5732"/><rect fill="#DCDCDC" height="112.8975" style="stroke:#000000;stroke-width:1.0;" width="10" x="1547" y="906.3467"/><rect fill="#F0F8FF" height="1046.7129" style="stroke:#000000;stroke-width:1.5;" width="1823" x="10" y="445.3457"/><rect fill="#ADD8E6" height="337.9922" style="stroke:#000000;stroke-width:1.5;" width="1803" x="20" y="498.5"/><rect fill="#FFE4E1" height="114.1973" style="stroke:#000000;stroke-width:1.5;" width="1176" x="20" y="1219.7969"/><rect fill="none" height="839.8965" style="stroke:#000000;stroke-width:1.5;" width="1467" x="20" y="1531.0586"/><rect fill="none" height="341.0156" style="stroke:#000000;stroke-width:1.5;" width="1196.5" x="253.5" y="1583.9023"/><rect fill="none" height="341.0156" style="stroke:#000000;stroke-width:1.5;" width="1223.5" x="253.5" y="1963.918"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="123" x2="123" y1="132.1738" y2="2412.9551"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="370.5" x2="370.5" y1="132.1738" y2="2412.9551"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="855" x2="855" y1="132.1738" y2="2412.9551"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1079" x2="1079" y1="132.1738" y2="2412.9551"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1303" x2="1303" y1="132.1738" y2="2412.9551"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1551.5" x2="1551.5" y1="132.1738" y2="2412.9551"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="180" x="30" y="104.4004">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="112" x="64" y="127.9551">Org-Admin</text><ellipse cx="123" cy="33.5645" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M123,41.5645 L123,68.5645 M110,49.5645 L136,49.5645 M123,68.5645 L110,83.5645 M123,68.5645 L136,83.5645 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="180" x="30" y="2431.291">Akteur in der Rolle</text><text fill="#000000" font-family="Aapex" font-size="20" lengthAdjust="spacing" textLength="112" x="64" y="2454.8457">Org-Admin</text><ellipse cx="123" cy="2467.5645" fill="#DCDCDC" rx="8" ry="8" style="stroke:#000000;stroke-width:0.5;"/><path d="M123,2475.5645 L123,2502.5645 M110,2483.5645 L136,2483.5645 M123,2502.5645 L110,2517.5645 M123,2502.5645 L136,2517.5645 " fill="none" style="stroke:#000000;stroke-width:0.5;"/><rect fill="#EFEFFF" height="84.6641" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="215" x="263.5" y="46.5098"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="201" x="270.5" y="72.8457">TI-Messenger-Client</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="150" x="296" y="96.4004">mit Org-Admin</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="132" x="305" y="119.9551">Funktionalität</text><rect fill="#EFEFFF" height="84.6641" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="215" x="263.5" y="2411.9551"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="201" x="270.5" y="2438.291">TI-Messenger-Client</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="150" x="296" y="2461.8457">mit Org-Admin</text><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="132" x="305" y="2485.4004">Funktionalität</text><rect fill="#EFEFFF" height="37.5547" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="748" y="93.6191"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="110" x="800" y="119.9551">FHIR-Proxy</text><rect fill="#EFEFFF" height="37.5547" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="748" y="2411.9551"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="110" x="800" y="2438.291">FHIR-Proxy</text><rect fill="#EFEFFF" height="37.5547" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="972" y="93.6191"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="124" x="1017" y="119.9551">Auth-Service</text><rect fill="#EFEFFF" height="37.5547" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="972" y="2411.9551"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="124" x="1017" y="2438.291">Auth-Service</text><rect fill="#EFEFFF" height="37.5547" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1196" y="93.6191"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="144" x="1231" y="119.9551">FHIR-Directory</text><rect fill="#EFEFFF" height="37.5547" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="1196" y="2411.9551"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="144" x="1231" y="2438.291">FHIR-Directory</text><rect fill="#EFEFFF" height="37.5547" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="225" x="1439.5" y="93.6191"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="211" x="1446.5" y="119.9551">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="37.5547" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="225" x="1439.5" y="2411.9551"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="211" x="1446.5" y="2438.291">Registrierungs-Dienst</text><rect fill="#DCDCDC" height="2084.6738" style="stroke:#000000;stroke-width:1.0;" width="10" x="366" y="318.2813"/><rect fill="#DCDCDC" height="216.1289" style="stroke:#000000;stroke-width:1.0;" width="10" x="850" y="1675.7891"/><rect fill="#DCDCDC" height="216.1289" style="stroke:#000000;stroke-width:1.0;" width="10" x="850" y="2055.8047"/><rect fill="#DCDCDC" height="380.793" style="stroke:#000000;stroke-width:1.0;" width="10" x="1074" y="1078.2656"/><rect fill="#DCDCDC" height="81.043" style="stroke:#000000;stroke-width:1.0;" width="10" x="1298" y="1776.8535"/><rect fill="#DCDCDC" height="81.043" style="stroke:#000000;stroke-width:1.0;" width="10" x="1298" y="2156.8691"/><rect fill="#DCDCDC" height="112.8975" style="stroke:#000000;stroke-width:1.0;" width="10" x="1547" y="656.5732"/><rect fill="#DCDCDC" height="112.8975" style="stroke:#000000;stroke-width:1.0;" width="10" x="1547" y="906.3467"/><path d="M24,172.1738 L24,222.1738 L470,222.1738 L470,182.1738 L460,172.1738 L24,172.1738 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M460,172.1738 L460,182.1738 L470,182.1738 L460,172.1738 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="380" x="30" y="193.6094">Die Organisation hat einen Messenger-Service</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="425" x="30" y="213.6309">bereitgestellt bekommen, der Teil der Föderation ist</text><polygon fill="#000000" points="354,314.2813,364,318.2813,354,322.2813,358,318.2813" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="123" x2="360" y1="318.2813" y2="318.2813"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="163" x="130" y="272.6523">FHIR Ressourcen im</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="166" x="130" y="292.6738">VZD-FHIR-Directory</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="96" x="130" y="312.6953">hinzufügen</text><line style="stroke:#000000;stroke-width:1.0;" x1="376" x2="418" y1="392.3457" y2="392.3457"/><line style="stroke:#000000;stroke-width:1.0;" x1="418" x2="418" y1="392.3457" y2="405.3457"/><line style="stroke:#000000;stroke-width:1.0;" x1="377" x2="418" y1="405.3457" y2="405.3457"/><polygon fill="#000000" points="387,401.3457,377,405.3457,387,409.3457,383,405.3457" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="169" x="383" y="346.7168">Prüfung, ob gültiges</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="160" x="383" y="366.7383">owner-accesstoken</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="62" x="383" y="386.7598">vorliegt</text><path d="M10,445.3457 L72,445.3457 L72,452.6563 L62,462.6563 L10,462.6563 L10,445.3457 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1046.7129" style="stroke:#000000;stroke-width:1.5;" width="1823" x="10" y="445.3457"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="25" y="458.9141">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="87" y="463.8691">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="366" x="91" y="462.8145">kein gültiges owner-accesstoken vorhanden</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="457" y="463.8691">]</text><path d="M20,498.5 L82,498.5 L82,505.8105 L72,515.8105 L20,515.8105 L20,498.5 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="337.9922" style="stroke:#000000;stroke-width:1.5;" width="1803" x="20" y="498.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="35" y="512.0684">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="97" y="517.0234">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="447" x="101" y="515.9688">Akteur ist nicht am Registrierungs-Dienst angemeldet</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="548" y="517.0234">]</text><polygon fill="#000000" points="354,606.7188,364,610.7188,354,614.7188,358,610.7188" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="123" x2="360" y1="610.7188" y2="610.7188"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="164" x="130" y="565.0898">Mit Admin-Account</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="214" x="130" y="585.1113">am Registrierungs-Dienst</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="81" x="130" y="605.1328">anmelden</text><polygon fill="#000000" points="1535,652.5732,1545,656.5732,1535,660.5732,1539,656.5732" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="376" x2="1541" y1="656.5732" y2="656.5732"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="325" x="383" y="650.9873">Login mit Client-Credentials + 2.Faktor</text><path d="M1562,623.7188 L1562,670.7188 L1818,670.7188 L1818,633.7188 L1808,623.7188 L1562,623.7188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1808,623.7188 L1808,633.7188 L1818,633.7188 L1808,623.7188 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="179" x="1568" y="644.1875">Schnittstelle wird nicht</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="235" x="1568" y="663.0313">durch die gematik spezifiziert</text><line style="stroke:#000000;stroke-width:1.0;" x1="1557" x2="1599" y1="722.4492" y2="722.4492"/><line style="stroke:#000000;stroke-width:1.0;" x1="1599" x2="1599" y1="722.4492" y2="735.4492"/><line style="stroke:#000000;stroke-width:1.0;" x1="1558" x2="1599" y1="735.4492" y2="735.4492"/><polygon fill="#000000" points="1568,731.4492,1558,735.4492,1568,739.4492,1564,735.4492" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="200" x="1564" y="696.8418">prüfe Client-Credentials</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="110" x="1564" y="716.8633">und 2. Faktor</text><polygon fill="#000000" points="387,765.4707,377,769.4707,387,773.4707,383,769.4707" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="381" x2="1551" y1="769.4707" y2="769.4707"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="50" x="1495" y="763.8848">status</text><polygon fill="#000000" points="134,799.4922,124,803.4922,134,807.4922,130,803.4922" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="128" x2="365" y1="803.4922" y2="803.4922"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="190" x="169" y="797.9063">Erfolgreich angemeldet</text><polygon fill="#000000" points="1535,902.3467,1545,906.3467,1535,910.3467,1539,906.3467" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="376" x2="1541" y1="906.3467" y2="906.3467"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="594" x="383" y="900.7607">RegService-OpenID-Token anfragen (z. B. GET /regserv/request_Token)</text><path d="M1562,873.4922 L1562,920.4922 L1818,920.4922 L1818,883.4922 L1808,873.4922 L1562,873.4922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1808,873.4922 L1808,883.4922 L1818,883.4922 L1808,873.4922 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="179" x="1568" y="893.9609">Schnittstelle wird nicht</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="235" x="1568" y="912.8047">durch die gematik spezifiziert</text><line style="stroke:#000000;stroke-width:1.0;" x1="1557" x2="1599" y1="972.2227" y2="972.2227"/><line style="stroke:#000000;stroke-width:1.0;" x1="1599" x2="1599" y1="972.2227" y2="985.2227"/><line style="stroke:#000000;stroke-width:1.0;" x1="1558" x2="1599" y1="985.2227" y2="985.2227"/><polygon fill="#000000" points="1568,981.2227,1558,985.2227,1568,989.2227,1564,985.2227" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="141" x="1564" y="946.6152">Verifizierung des</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="185" x="1564" y="966.6367">angemeldeten Akteurs</text><polygon fill="#000000" points="387,1015.2441,377,1019.2441,387,1023.2441,383,1019.2441" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="381" x2="1551" y1="1019.2441" y2="1019.2441"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="658" x="887" y="1013.6582">RegService-OpenID-Token {telematikID, professionOID, Signaturzertifikat (x5c)}</text><polygon fill="#000000" points="1062,1074.2656,1072,1078.2656,1062,1082.2656,1066,1078.2656" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="376" x2="1068" y1="1078.2656" y2="1078.2656"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="584" x="383" y="1072.6797">GET /owner-authenticate (Auth Header mit RegService-OpenID-Token)</text><line style="stroke:#000000;stroke-width:1.0;" x1="1084" x2="1126" y1="1152.042" y2="1152.042"/><line style="stroke:#000000;stroke-width:1.0;" x1="1126" x2="1126" y1="1152.042" y2="1165.042"/><line style="stroke:#000000;stroke-width:1.0;" x1="1085" x2="1126" y1="1165.042" y2="1165.042"/><polygon fill="#000000" points="1095,1161.042,1085,1165.042,1095,1169.042,1091,1165.042" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="156" x="1091" y="1146.4561">Prüfung des Token</text><path d="M1259,1116.2656 L1259,1182.2656 L1519,1182.2656 L1519,1126.2656 L1509,1116.2656 L1259,1116.2656 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1509,1116.2656 L1509,1126.2656 L1519,1126.2656 L1509,1116.2656 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="191" x="1265" y="1136.7344">Die Prüfschritte sind der</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="234" x="1265" y="1155.5781">gemSpec_VZD_FHIR_Directory</text><text fill="#000000" font-family="sans-serif" font-size="16" lengthAdjust="spacing" textLength="112" x="1265" y="1174.4219">zu entnehmen</text><path d="M20,1219.7969 L87,1219.7969 L87,1227.1074 L77,1237.1074 L20,1237.1074 L20,1219.7969 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="114.1973" style="stroke:#000000;stroke-width:1.5;" width="1176" x="20" y="1219.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22" x="35" y="1233.3652">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="102" y="1238.3203">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="72" x="106" y="1237.2656">Abbruch</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="178" y="1238.3203">]</text><polygon fill="#000000" points="387,1262.9727,377,1266.9727,387,1270.9727,383,1266.9727" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="381" x2="1073" y1="1266.9727" y2="1266.9727"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="249" x="818" y="1261.3867">Tokenprüfung fehlgeschlagen</text><polygon fill="#000000" points="134,1296.9941,124,1300.9941,134,1304.9941,130,1300.9941" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="128" x2="365" y1="1300.9941" y2="1300.9941"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="159" x="200" y="1295.4082">keine Berechtigung</text><line style="stroke:#000000;stroke-width:1.0;" x1="1084" x2="1126" y1="1412.0371" y2="1412.0371"/><line style="stroke:#000000;stroke-width:1.0;" x1="1126" x2="1126" y1="1412.0371" y2="1425.0371"/><line style="stroke:#000000;stroke-width:1.0;" x1="1085" x2="1126" y1="1425.0371" y2="1425.0371"/><polygon fill="#000000" points="1095,1421.0371,1085,1425.0371,1095,1429.0371,1091,1425.0371" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="66" x="1091" y="1386.4297">erzeuge</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="160" x="1091" y="1406.4512">owner-accesstoken</text><polygon fill="#000000" points="387,1455.0586,377,1459.0586,387,1463.0586,383,1459.0586" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="381" x2="1078" y1="1459.0586" y2="1459.0586"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="160" x="912" y="1453.4727">owner-accesstoken</text><path d="M20,1531.0586 L326,1531.0586 L326,1541.9023 L316,1551.9023 L20,1551.9023 L20,1531.0586 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="839.8965" style="stroke:#000000;stroke-width:1.5;" width="1467" x="20" y="1531.0586"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="261" x="35" y="1547.5273">FHIR-Directory Eintrag erstellen</text><path d="M253.5,1583.9023 L651.5,1583.9023 L651.5,1594.7461 L641.5,1604.7461 L253.5,1604.7461 L253.5,1583.9023 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="341.0156" style="stroke:#000000;stroke-width:1.5;" width="1196.5" x="253.5" y="1583.9023"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="353" x="268.5" y="1600.3711">FHIR-Ressource der Organisation anzeigen</text><polygon fill="#000000" points="838,1671.7891,848,1675.7891,838,1679.7891,842,1675.7891" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="376" x2="844" y1="1675.7891" y2="1675.7891"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="418" x="383" y="1650.1816">FHIR-Operation um eigenen Datensatz anzuzeigen</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="334" x="383" y="1670.2031">Authorization Bearer owner-accesstoken</text><line style="stroke:#000000;stroke-width:1.0;" x1="860" x2="902" y1="1729.832" y2="1729.832"/><line style="stroke:#000000;stroke-width:1.0;" x1="902" x2="902" y1="1729.832" y2="1742.832"/><line style="stroke:#000000;stroke-width:1.0;" x1="861" x2="902" y1="1742.832" y2="1742.832"/><polygon fill="#000000" points="871,1738.832,861,1742.832,871,1746.832,867,1742.832" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="44" x="867" y="1704.2246">prüfe</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="160" x="867" y="1724.2461">owner-accesstoken</text><polygon fill="#000000" points="1286,1772.8535,1296,1776.8535,1286,1780.8535,1290,1776.8535" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="860" x2="1292" y1="1776.8535" y2="1776.8535"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="123" x="867" y="1771.2676">HTTPS Forward</text><line style="stroke:#000000;stroke-width:1.0;" x1="1308" x2="1350" y1="1810.875" y2="1810.875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1350" x2="1350" y1="1810.875" y2="1823.875"/><line style="stroke:#000000;stroke-width:1.0;" x1="1309" x2="1350" y1="1823.875" y2="1823.875"/><polygon fill="#000000" points="1319,1819.875,1309,1823.875,1319,1827.875,1315,1823.875" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="123" x="1315" y="1805.2891">Eintrag suchen</text><polygon fill="#000000" points="871,1853.8965,861,1857.8965,871,1861.8965,867,1857.8965" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="865" x2="1302" y1="1857.8965" y2="1857.8965"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="99" x="1197" y="1852.3105">FHIR Bundle</text><polygon fill="#000000" points="387,1887.918,377,1891.918,387,1895.918,383,1891.918" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="381" x2="854" y1="1891.918" y2="1891.918"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="123" x="725" y="1886.332">HTTPS Forward</text><path d="M253.5,1963.918 L714.5,1963.918 L714.5,1974.7617 L704.5,1984.7617 L253.5,1984.7617 L253.5,1963.918 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="341.0156" style="stroke:#000000;stroke-width:1.5;" width="1223.5" x="253.5" y="1963.918"/><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="416" x="268.5" y="1980.3867">FHIR-Ressource der Organisation erstellen/ändern</text><polygon fill="#000000" points="838,2051.8047,848,2055.8047,838,2059.8047,842,2055.8047" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="376" x2="844" y1="2055.8047" y2="2055.8047"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="455" x="383" y="2030.1973">FHIR-Operationen um eigenen Datensatz zu bearbeiten</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="334" x="383" y="2050.2188">Authorization Bearer owner-accesstoken</text><line style="stroke:#000000;stroke-width:1.0;" x1="860" x2="902" y1="2109.8477" y2="2109.8477"/><line style="stroke:#000000;stroke-width:1.0;" x1="902" x2="902" y1="2109.8477" y2="2122.8477"/><line style="stroke:#000000;stroke-width:1.0;" x1="861" x2="902" y1="2122.8477" y2="2122.8477"/><polygon fill="#000000" points="871,2118.8477,861,2122.8477,871,2126.8477,867,2122.8477" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="44" x="867" y="2084.2402">prüfe</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="160" x="867" y="2104.2617">owner-accesstoken</text><polygon fill="#000000" points="1286,2152.8691,1296,2156.8691,1286,2160.8691,1290,2156.8691" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="860" x2="1292" y1="2156.8691" y2="2156.8691"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="123" x="867" y="2151.2832">HTTPS Forward</text><line style="stroke:#000000;stroke-width:1.0;" x1="1308" x2="1350" y1="2190.8906" y2="2190.8906"/><line style="stroke:#000000;stroke-width:1.0;" x1="1350" x2="1350" y1="2190.8906" y2="2203.8906"/><line style="stroke:#000000;stroke-width:1.0;" x1="1309" x2="1350" y1="2203.8906" y2="2203.8906"/><polygon fill="#000000" points="1319,2199.8906,1309,2203.8906,1319,2207.8906,1315,2203.8906" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="150" x="1315" y="2185.3047">Eintrag bearbeiten</text><polygon fill="#000000" points="871,2233.9121,861,2237.9121,871,2241.9121,867,2237.9121" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="865" x2="1302" y1="2237.9121" y2="2237.9121"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="50" x="1246" y="2232.3262">Status</text><polygon fill="#000000" points="387,2267.9336,377,2271.9336,387,2275.9336,383,2271.9336" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="381" x2="854" y1="2271.9336" y2="2271.9336"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="123" x="725" y="2266.3477">HTTPS Forward</text><polygon fill="#000000" points="134,2333.9551,124,2337.9551,134,2341.9551,130,2337.9551" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="128" x2="365" y1="2337.9551" y2="2337.9551"/><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="50" x="309" y="2332.3691">status</text><!--MD5=[177e2e01ac8d2b10117a380c02130e8d]
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 5
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}
    actor U as "Akteur in der Rolle\nOrg-Admin"
    box <size:18>Endgerät</size>\n #WhiteSmoke 
    participant C as "TI-Messenger-Client\n mit Org-Admin \nFunktionalität"
    end box
    box <size:18>VZD-FHIR-Directory</size> #WhiteSmoke
      participant FP as "FHIR-Proxy"
      participant Auth as "Auth-Service"
      participant VZD as "FHIR-Directory"
    end box
    box <size:18>Ti-Messenger-Fachdienst</size> #WhiteSmoke
    participant RD as "Registrierungs-Dienst"
    end box

|||
note over U, C: <size:17>Die Organisation hat einen Messenger-Service\n<size:17>bereitgestellt bekommen, der Teil der Föderation ist</size>
|||

U->C: FHIR Ressourcen im \nVZD-FHIR-Directory \nhinzufügen
  Activate C
C->C: Prüfung, ob gültiges \nowner-accesstoken \nvorliegt

|||
alt#LightGrey #AliceBlue <size:16>kein gültiges owner-accesstoken vorhanden</size>
|||
  alt#LightGrey #LightBlue <size:16>Akteur ist nicht am Registrierungs-Dienst angemeldet</size>
    |||
    U->C: Mit Admin-Account \nam Registrierungs-Dienst \nanmelden
    C->RD: Login mit Client-Credentials + 2.Faktor
    note right: <size:16>Schnittstelle wird nicht \n<size:16>durch die gematik spezifiziert</size>
      activate RD
    RD->RD: prüfe Client-Credentials\nund 2. Faktor
    RD- ->C: status
      deactivate RD
    C- ->U: Erfolgreich angemeldet
    |||
  end
  |||
  C -> RD: RegService-OpenID-Token anfragen (z. B. GET /regserv/request_Token)
  note right: <size:16>Schnittstelle wird nicht \n<size:16>durch die gematik spezifiziert</size>
    activate RD 
  RD -> RD: Verifizierung des\nangemeldeten Akteurs 
  RD - -> C: RegService-OpenID-Token {telematikID, professionOID, Signaturzertifikat (x5c)}
    deactivate RD
  |||
  C->Auth: GET /owner-authenticate (Auth Header mit RegService-OpenID-Token)
    activate Auth
    |||
  Auth -> Auth: Prüfung des Token
  note right: <size:16>Die Prüfschritte sind der \n<size:16>gemSpec_VZD_FHIR_Directory \n<size:16>zu entnehmen</size>
  |||
    opt#LightGrey #MistyRose <size:16>Abbruch</size>
    Auth - -> C: Tokenprüfung fehlgeschlagen
    C - -> U: keine Berechtigung
    |||
    end
  |||
  Auth->Auth: erzeuge \nowner-accesstoken
  Auth- ->C: owner-accesstoken
  ||| 
    deactivate Auth
end
|||

group <size:16>FHIR-Directory Eintrag erstellen</size>
  |||
  group <size:16>FHIR-Ressource der Organisation anzeigen</size>
  |||
  C->FP: FHIR-Operation um eigenen Datensatz anzuzeigen\nAuthorization Bearer owner-accesstoken
    Activate FP
  FP->FP: prüfe \nowner-accesstoken
  FP->VZD: HTTPS Forward
    Activate VZD
  VZD->VZD: Eintrag suchen
  VZD- ->FP: FHIR Bundle
    Deactivate VZD
  FP- ->C: HTTPS Forward
    Deactivate FP
  |||
  end

  |||
  group <size:16>FHIR-Ressource der Organisation erstellen/ändern</size>
  |||
  C->FP: FHIR-Operationen um eigenen Datensatz zu bearbeiten\nAuthorization Bearer owner-accesstoken
    Activate FP
  FP->FP: prüfe \nowner-accesstoken
  FP->VZD: HTTPS Forward
    Activate VZD
  VZD->VZD: Eintrag bearbeiten
  VZD- ->FP: Status
    Deactivate VZD
  FP- ->C: HTTPS Forward
     Deactivate FP
  |||
  end
  C- ->U: status    
  |||
end
|||

  Deactivate C
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>