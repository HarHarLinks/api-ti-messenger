<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1085px" preserveAspectRatio="none" style="width:1013px;height:1085px;background:#FFFFFF;" version="1.1" viewBox="0 0 1013 1085" width="1013px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="1073.3125" style="stroke:#181818;stroke-width:0.5;" width="749" x="26" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="170" x="315.5" y="24.6855">Messenger-Service</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4" x="315.5" y="42.1357"> </text><rect fill="#DCDCDC" height="928.0078" style="stroke:#000000;stroke-width:1.0;" width="10" x="132" y="99.1484"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="435" y="344.5391"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="435" y="893.7734"/><rect fill="none" height="725.4766" style="stroke:#000000;stroke-width:1.5;" width="996" x="10" y="268.6797"/><rect fill="#ADD8E6" height="264.75" style="stroke:#000000;stroke-width:1.5;" width="618" x="20" y="697.4063"/><rect fill="#ADD8E6" height="142.8906" style="stroke:none;stroke-width:1.0;" width="618" x="20" y="819.2656"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="137" x2="137" y1="89.1484" y2="1036.1563"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="440" x2="440" y1="89.1484" y2="1036.1563"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="664" x2="664" y1="89.1484" y2="1036.1563"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="889" x2="889" y1="89.1484" y2="1036.1563"/><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="30" y="48.9922"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="155" x="59.5" y="76.7539">Messenger-Proxy</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="30" y="1035.1563"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="155" x="59.5" y="1062.918">Messenger-Proxy</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="333" y="48.9922"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="167" x="356.5" y="76.7539">Matrix-Homeserver</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="333" y="1035.1563"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="167" x="356.5" y="1062.918">Matrix-Homeserver</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="557" y="48.9922"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="188" x="570" y="76.7539">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="557" y="1035.1563"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="188" x="570" y="1062.918">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="782" y="48.9922"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="178" x="800" y="76.7539">VZD-FHIR-Directory</text><rect fill="#EFEFFF" height="39.1563" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="782" y="1035.1563"/><text fill="#000000" font-family="sans-serif" font-size="20" lengthAdjust="spacing" textLength="178" x="800" y="1062.918">VZD-FHIR-Directory</text><rect fill="#DCDCDC" height="928.0078" style="stroke:#000000;stroke-width:1.0;" width="10" x="132" y="99.1484"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="435" y="344.5391"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="435" y="893.7734"/><line style="stroke:#000000;stroke-width:1.0;" x1="142" x2="184" y1="215.6797" y2="215.6797"/><line style="stroke:#000000;stroke-width:1.0;" x1="184" x2="184" y1="215.6797" y2="228.6797"/><line style="stroke:#000000;stroke-width:1.0;" x1="143" x2="184" y1="228.6797" y2="228.6797"/><polygon fill="#000000" points="153,224.6797,143,228.6797,153,232.6797,149,228.6797" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="177.8701">1</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="105" x="162" y="145.7959">prüfe im Event</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="148" x="162" y="167.1787">ob Matrix-Domain(s)</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="161" x="162" y="188.5615">in der Föderationsliste</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="132" x="162" y="209.9443">vorhanden ist/sind</text><path d="M10,268.6797 L71,268.6797 L71,277.0313 L61,287.0313 L10,287.0313 L10,268.6797 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="725.4766" style="stroke:#000000;stroke-width:1.5;" width="996" x="10" y="268.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="283.1748">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="86" y="288.3877">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="902" x="90" y="287.2891">Matrix-Domain ist in der Föderationsliste enthalten ODER Matrix-Domain des Senders = Matrix-Domain des Empfängers</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="992" y="288.3877">]</text><polygon fill="#000000" points="423,340.5391,433,344.5391,423,348.5391,427,344.5391" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="142" x2="429" y1="344.5391" y2="344.5391"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="338.8037">2</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="128" x="162" y="338.8037">HTTP(S) Forward</text><polygon fill="#000000" points="153,375.9219,143,379.9219,153,383.9219,149,379.9219" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="147" x2="439" y1="379.9219" y2="379.9219"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="375" y="374.1865">3</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="45" x="388" y="374.1865">Status</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1006" y1="413.9219" y2="413.9219"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="15" y="431.6299">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="423" x="19" y="430.5313">Matrix-Domain ist nicht in der Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="442" y="431.6299">]</text><rect fill="none" height="62.8281" style="stroke:#000000;stroke-width:1.5;" width="972" x="27" y="460.0469"/><path d="M27,460.0469 L89,460.0469 L89,468.0469 L79,478.0469 L27,478.0469 L27,460.0469 " fill="#98FB98" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="40" y="475.542">ref</text><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="77" x="341.5" y="499.6943">Anhang B</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="261" x="423.5" y="499.6943">- Aktualisierung der Föderationsliste</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3" x="511.5" y="515.8867"> </text><line style="stroke:#000000;stroke-width:1.0;" x1="142" x2="184" y1="644.4063" y2="644.4063"/><line style="stroke:#000000;stroke-width:1.0;" x1="184" x2="184" y1="644.4063" y2="657.4063"/><line style="stroke:#000000;stroke-width:1.0;" x1="143" x2="184" y1="657.4063" y2="657.4063"/><polygon fill="#000000" points="153,653.4063,143,657.4063,153,661.4063,149,657.4063" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="606.5967">4</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="171" x="162" y="574.5225">prüfe ob Matrix-Domain</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="70" x="162" y="595.9053">der MXID</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="42" x="162" y="617.2881">in der</text><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="105" x="209" y="617.2881">aktualisierten</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="5" x="314" y="617.2881"> </text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="216" x="162" y="638.6709">Föderationsliste vorhanden ist</text><path d="M20,697.4063 L81,697.4063 L81,705.7578 L71,715.7578 L20,715.7578 L20,697.4063 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="264.75" style="stroke:#000000;stroke-width:1.5;" width="618" x="20" y="697.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="35" y="711.9014">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="96" y="717.1143">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="529" x="100" y="716.0156">Matrix-Domain ist nicht in der aktualisierten Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="629" y="717.1143">]</text><line style="stroke:#000000;stroke-width:1.0;" x1="142" x2="184" y1="773.2656" y2="773.2656"/><line style="stroke:#000000;stroke-width:1.0;" x1="184" x2="184" y1="773.2656" y2="786.2656"/><line style="stroke:#000000;stroke-width:1.0;" x1="143" x2="184" y1="786.2656" y2="786.2656"/><polygon fill="#000000" points="153,782.2656,143,786.2656,153,790.2656,149,786.2656" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="767.5303">5</text><text fill="#FF0000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="266" x="162" y="767.5303">Abbruch, Verbindung wird abgelehnt</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="638" y1="820.2656" y2="820.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="25" y="837.9736">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="487" x="29" y="836.875">Matrix-Domain ist in der aktualisierten Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="516" y="837.9736">]</text><polygon fill="#000000" points="423,889.7734,433,893.7734,423,897.7734,427,893.7734" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="142" x2="429" y1="893.7734" y2="893.7734"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="888.0381">6</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="128" x="162" y="888.0381">HTTP(S) Forward</text><polygon fill="#000000" points="153,925.1563,143,929.1563,153,933.1563,149,929.1563" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="147" x2="439" y1="929.1563" y2="929.1563"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="375" y="923.4209">7</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="45" x="388" y="923.4209">Status</text><!--MD5=[5d3baa23c8c6d73637618ae6b093520b]
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
}

autonumber

    box <size:18>Messenger-Service\n#WhiteSmoke
    participant MP as "Messenger-Proxy"
    participant MH as "Matrix-Homeserver"
    participant RD as "Registrierungs-Dienst"
    end box
    participant VZD as "VZD-FHIR-Directory"

|||
    Activate MP
  MP->MP: prüfe im Event\nob Matrix-Domain(s) \nin der Föderationsliste \nvorhanden ist/sind

|||
alt#LightGrey  <size:16>Matrix-Domain ist in der Föderationsliste enthalten ODER Matrix-Domain des Senders = Matrix-Domain des Empfängers</size>
    ||| 
    MP->MH: HTTP(S) Forward
      Activate MH
    MH- ->MP: Status
      Deactivate MH
      'Deactivate MP
    ||| 


  else <size:16>Matrix-Domain ist nicht in der Föderationsliste enthalten</size> 
  |||  
  ref over MP, VZD: <size:17>**Anhang B** - Aktualisierung der Föderationsliste</size>\n 
  |||
  MP->MP: prüfe ob Matrix-Domain \nder MXID \nin der **aktualisierten** \nFöderationsliste vorhanden ist
  |||

    alt#LightGrey #LightBlue <size:16>Matrix-Domain ist nicht in der aktualisierten Föderationsliste enthalten</size>
      |||
      MP->MP: <font color=red>Abbruch, Verbindung wird abgelehnt</font>
      ||| 
      else <size:16>Matrix-Domain ist in der aktualisierten Föderationsliste enthalten</size>
      |||
         MP->MH: HTTP(S) Forward
          Activate MH
        MH- ->MP: Status
          Deactivate MH
      |||
    end

  |||

end
|||
@enduml

@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
}

autonumber

    box <size:18>Messenger-Service\n#WhiteSmoke
    participant MP as "Messenger-Proxy"
    participant MH as "Matrix-Homeserver"
    participant RD as "Registrierungs-Dienst"
    end box
    participant VZD as "VZD-FHIR-Directory"

|||
    Activate MP
  MP->MP: prüfe im Event\nob Matrix-Domain(s) \nin der Föderationsliste \nvorhanden ist/sind

|||
alt#LightGrey  <size:16>Matrix-Domain ist in der Föderationsliste enthalten ODER Matrix-Domain des Senders = Matrix-Domain des Empfängers</size>
    ||| 
    MP->MH: HTTP(S) Forward
      Activate MH
    MH- ->MP: Status
      Deactivate MH
    ||| 


  else <size:16>Matrix-Domain ist nicht in der Föderationsliste enthalten</size> 
  |||  
  ref over MP, VZD: <size:17>**Anhang B** - Aktualisierung der Föderationsliste</size>\n 
  |||
  MP->MP: prüfe ob Matrix-Domain \nder MXID \nin der **aktualisierten** \nFöderationsliste vorhanden ist
  |||

    alt#LightGrey #LightBlue <size:16>Matrix-Domain ist nicht in der aktualisierten Föderationsliste enthalten</size>
      |||
      MP->MP: <font color=red>Abbruch, Verbindung wird abgelehnt</font>
      ||| 
      else <size:16>Matrix-Domain ist in der aktualisierten Föderationsliste enthalten</size>
      |||
         MP->MH: HTTP(S) Forward
          Activate MH
        MH- ->MP: Status
          Deactivate MH
      |||
    end

  |||

end
|||
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>