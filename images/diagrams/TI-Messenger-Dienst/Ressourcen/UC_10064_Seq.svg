<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1083px" preserveAspectRatio="none" style="width:1013px;height:1083px;background:#FFFFFF;" version="1.1" viewBox="0 0 1013 1083" width="1013px" zoomAndPan="magnify"><defs/><g><rect fill="#F5F5F5" height="1071.7891" style="stroke:#181818;stroke-width:0.5;" width="749" x="26" y="6"/><text fill="#000000" font-family="sans-serif" font-size="18" font-weight="bold" lengthAdjust="spacing" textLength="170" x="315.5" y="24.6855">Messenger-Service</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="4" x="315.5" y="42.1357"> </text><rect fill="#DCDCDC" height="928.0078" style="stroke:#000000;stroke-width:1.0;" width="10" x="132" y="98.3867"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="435" y="343.7773"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="435" y="893.0117"/><rect fill="none" height="725.4766" style="stroke:#000000;stroke-width:1.5;" width="996" x="10" y="267.918"/><rect fill="#ADD8E6" height="264.75" style="stroke:#000000;stroke-width:1.5;" width="618" x="20" y="696.6445"/><rect fill="#ADD8E6" height="142.8906" style="stroke:none;stroke-width:1.0;" width="618" x="20" y="818.5039"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="137" x2="137" y1="88.3867" y2="1035.3945"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="440" x2="440" y1="88.3867" y2="1035.3945"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="664" x2="664" y1="88.3867" y2="1035.3945"/><line style="stroke:#000000;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="889" x2="889" y1="88.3867" y2="1035.3945"/><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="30" y="48.9922"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="140" x="67" y="76.168">Messenger-Proxy</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="30" y="1034.3945"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="140" x="67" y="1061.5703">Messenger-Proxy</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="333" y="48.9922"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="155" x="362.5" y="76.168">Matrix-Homeserver</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="333" y="1034.3945"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="155" x="362.5" y="1061.5703">Matrix-Homeserver</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="557" y="48.9922"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="176" x="576" y="76.168">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="557" y="1034.3945"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="176" x="576" y="1061.5703">Registrierungs-Dienst</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="782" y="48.9922"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="152" x="813" y="76.168">VZD-FHIR-Directory</text><rect fill="#EFEFFF" height="38.3945" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:0.5;" width="214" x="782" y="1034.3945"/><text fill="#000000" font-family="Impact" font-size="20" lengthAdjust="spacing" textLength="152" x="813" y="1061.5703">VZD-FHIR-Directory</text><rect fill="#DCDCDC" height="928.0078" style="stroke:#000000;stroke-width:1.0;" width="10" x="132" y="98.3867"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="435" y="343.7773"/><rect fill="#DCDCDC" height="35.3828" style="stroke:#000000;stroke-width:1.0;" width="10" x="435" y="893.0117"/><line style="stroke:#000000;stroke-width:1.0;" x1="142" x2="184" y1="214.918" y2="214.918"/><line style="stroke:#000000;stroke-width:1.0;" x1="184" x2="184" y1="214.918" y2="227.918"/><line style="stroke:#000000;stroke-width:1.0;" x1="143" x2="184" y1="227.918" y2="227.918"/><polygon fill="#000000" points="153,223.918,143,227.918,153,231.918,149,227.918" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="177.1084">1</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="105" x="162" y="145.0342">prüfe im Event</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="148" x="162" y="166.417">ob Matrix-Domain(s)</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="161" x="162" y="187.7998">in der Föderationsliste</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="132" x="162" y="209.1826">vorhanden ist/sind</text><path d="M10,267.918 L71,267.918 L71,276.2695 L61,286.2695 L10,286.2695 L10,267.918 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="725.4766" style="stroke:#000000;stroke-width:1.5;" width="996" x="10" y="267.918"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="282.4131">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="86" y="287.626">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="902" x="90" y="286.5273">Matrix-Domain ist in der Föderationsliste enthalten ODER Matrix-Domain des Senders = Matrix-Domain des Empfängers</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="992" y="287.626">]</text><polygon fill="#000000" points="423,339.7773,433,343.7773,423,347.7773,427,343.7773" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="142" x2="429" y1="343.7773" y2="343.7773"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="338.042">2</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="128" x="162" y="338.042">HTTP(S) Forward</text><polygon fill="#000000" points="153,375.1602,143,379.1602,153,383.1602,149,379.1602" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="147" x2="439" y1="379.1602" y2="379.1602"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="375" y="373.4248">3</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="45" x="388" y="373.4248">Status</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1006" y1="413.1602" y2="413.1602"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="15" y="430.8682">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="423" x="19" y="429.7695">Matrix-Domain ist nicht in der Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="442" y="430.8682">]</text><rect fill="none" height="62.8281" style="stroke:#000000;stroke-width:1.5;" width="972" x="27" y="459.2852"/><path d="M27,459.2852 L89,459.2852 L89,467.2852 L79,477.2852 L27,477.2852 L27,459.2852 " fill="#98FB98" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17" x="40" y="474.7803">ref</text><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="77" x="341.5" y="498.9326">Anhang B</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="261" x="423.5" y="498.9326">- Aktualisierung der Föderationsliste</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="3" x="511.5" y="515.125"> </text><line style="stroke:#000000;stroke-width:1.0;" x1="142" x2="184" y1="643.6445" y2="643.6445"/><line style="stroke:#000000;stroke-width:1.0;" x1="184" x2="184" y1="643.6445" y2="656.6445"/><line style="stroke:#000000;stroke-width:1.0;" x1="143" x2="184" y1="656.6445" y2="656.6445"/><polygon fill="#000000" points="153,652.6445,143,656.6445,153,660.6445,149,656.6445" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="605.835">4</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="171" x="162" y="573.7607">prüfe ob Matrix-Domain</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="70" x="162" y="595.1436">der MXID</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="42" x="162" y="616.5264">in der</text><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="105" x="209" y="616.5264">aktualisierten</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="5" x="314" y="616.5264"> </text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="216" x="162" y="637.9092">Föderationsliste vorhanden ist</text><path d="M20,696.6445 L81,696.6445 L81,704.9961 L71,714.9961 L20,714.9961 L20,696.6445 " fill="#D3D3D3" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="264.75" style="stroke:#000000;stroke-width:1.5;" width="618" x="20" y="696.6445"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="35" y="711.1396">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="96" y="716.3525">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="529" x="100" y="715.2539">Matrix-Domain ist nicht in der aktualisierten Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="629" y="716.3525">]</text><line style="stroke:#000000;stroke-width:1.0;" x1="142" x2="184" y1="772.5039" y2="772.5039"/><line style="stroke:#000000;stroke-width:1.0;" x1="184" x2="184" y1="772.5039" y2="785.5039"/><line style="stroke:#000000;stroke-width:1.0;" x1="143" x2="184" y1="785.5039" y2="785.5039"/><polygon fill="#000000" points="153,781.5039,143,785.5039,153,789.5039,149,785.5039" style="stroke:#000000;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="766.7686">5</text><text fill="#FF0000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="266" x="162" y="766.7686">Abbruch, Verbindung wird abgelehnt</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="638" y1="819.5039" y2="819.5039"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="25" y="837.2119">[</text><text fill="#000000" font-family="sans-serif" font-size="16" font-weight="bold" lengthAdjust="spacing" textLength="487" x="29" y="836.1133">Matrix-Domain ist in der aktualisierten Föderationsliste enthalten</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="4" x="516" y="837.2119">]</text><polygon fill="#000000" points="423,889.0117,433,893.0117,423,897.0117,427,893.0117" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;" x1="142" x2="429" y1="893.0117" y2="893.0117"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="149" y="887.2764">6</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="128" x="162" y="887.2764">HTTP(S) Forward</text><polygon fill="#000000" points="153,924.3945,143,928.3945,153,932.3945,149,928.3945" style="stroke:#000000;stroke-width:1.0;"/><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="147" x2="439" y1="928.3945" y2="928.3945"/><text fill="#000000" font-family="sans-serif" font-size="17" font-weight="bold" lengthAdjust="spacing" textLength="9" x="375" y="922.6592">7</text><text fill="#000000" font-family="sans-serif" font-size="17" lengthAdjust="spacing" textLength="45" x="388" y="922.6592">Status</text><!--MD5=[debbcfe1db070b6a95a330acbae560ca]
@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}

autonumber

    box <size:18>Messenger-Service\n#WhiteSmoke
    participant MP as "Messenger-Proxy"
    participant MH as "Matrix-Homeserver"
    participant RD as "Registrierungs-Dienst"
    end box
    participant VZD as "VZD-FHIR-Directory"

|||
    Activate MP
  MP->MP: prüfe im Event\nob Matrix-Domain(s) \nin der Föderationsliste \nvorhanden ist/sind

|||
alt#LightGrey  <size:16>Matrix-Domain ist in der Föderationsliste enthalten ODER Matrix-Domain des Senders = Matrix-Domain des Empfängers</size>
    ||| 
    MP->MH: HTTP(S) Forward
      Activate MH
    MH- ->MP: Status
      Deactivate MH
      'Deactivate MP
    ||| 


  else <size:16>Matrix-Domain ist nicht in der Föderationsliste enthalten</size> 
  |||  
  ref over MP, VZD: <size:17>**Anhang B** - Aktualisierung der Föderationsliste</size>\n 
  |||
  MP->MP: prüfe ob Matrix-Domain \nder MXID \nin der **aktualisierten** \nFöderationsliste vorhanden ist
  |||

    alt#LightGrey #LightBlue <size:16>Matrix-Domain ist nicht in der aktualisierten Föderationsliste enthalten</size>
      |||
      MP->MP: <font color=red>Abbruch, Verbindung wird abgelehnt</font>
      ||| 
      else <size:16>Matrix-Domain ist in der aktualisierten Föderationsliste enthalten</size>
      |||
         MP->MH: HTTP(S) Forward
          Activate MH
        MH- ->MP: Status
          Deactivate MH
      |||
    end

  |||

end
|||
@enduml

@startuml
skinparam sequenceMessageAlign direction
skinparam minClassWidth 200
skinparam BoxPadding 1
skinparam sequenceReferenceHeaderBackgroundColor palegreen
scale max 2048 width

skinparam sequence {
ArrowColor black
ArrowFontSize 17
ActorBorderColor black
LifeLineBorderColor black
LifeLineBackgroundColor Gainsboro

ParticipantBorderColor Motivation
ParticipantBackgroundColor Motivation
ParticipantFontName Impact
ParticipantFontSize 20
ParticipantFontColor black
ParticipantBorderColor Black
ParticipantBackgroundColor MOTIVATION

ActorBackgroundColor Gainsboro
ActorFontColor black
ActorFontSize 20
ActorFontName Aapex
}

autonumber

    box <size:18>Messenger-Service\n#WhiteSmoke
    participant MP as "Messenger-Proxy"
    participant MH as "Matrix-Homeserver"
    participant RD as "Registrierungs-Dienst"
    end box
    participant VZD as "VZD-FHIR-Directory"

|||
    Activate MP
  MP->MP: prüfe im Event\nob Matrix-Domain(s) \nin der Föderationsliste \nvorhanden ist/sind

|||
alt#LightGrey  <size:16>Matrix-Domain ist in der Föderationsliste enthalten ODER Matrix-Domain des Senders = Matrix-Domain des Empfängers</size>
    ||| 
    MP->MH: HTTP(S) Forward
      Activate MH
    MH- ->MP: Status
      Deactivate MH
    ||| 


  else <size:16>Matrix-Domain ist nicht in der Föderationsliste enthalten</size> 
  |||  
  ref over MP, VZD: <size:17>**Anhang B** - Aktualisierung der Föderationsliste</size>\n 
  |||
  MP->MP: prüfe ob Matrix-Domain \nder MXID \nin der **aktualisierten** \nFöderationsliste vorhanden ist
  |||

    alt#LightGrey #LightBlue <size:16>Matrix-Domain ist nicht in der aktualisierten Föderationsliste enthalten</size>
      |||
      MP->MP: <font color=red>Abbruch, Verbindung wird abgelehnt</font>
      ||| 
      else <size:16>Matrix-Domain ist in der aktualisierten Föderationsliste enthalten</size>
      |||
         MP->MH: HTTP(S) Forward
          Activate MH
        MH- ->MP: Status
          Deactivate MH
      |||
    end

  |||

end
|||
@enduml

PlantUML version 1.2022.7(Mon Aug 22 19:01:30 CEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>