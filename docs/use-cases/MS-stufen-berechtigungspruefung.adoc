ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

:imagesdir: ../../images

image:gematik_logo.svg[width=70%]

=== Stufen der Berechtigungsprüfung
Die folgende Abbildung beschreibt, wie die Berechtigungsprüfung eingehender und ausgehender Matrix-Events am Messenger-Proxy erfolgen MUSS. Das Berechtigungskonzept basiert auf einer dreistufigen Prüfung, die in den Kapiteln 3.5.1 - Client-Server Kommunikation und  3.5.2 - Server-Server Kommunikation beschrieben sind. Es wird auf die Erwähnung notwendiger Authentifizierungen an dieser Stelle verzichtet.

.Anwendungsfallbeschreibung
[%collapsible%open]
====
[caption=]
Stufen der Berechtigungsprüfung
[%header, cols="1,1"]
|===
| |Beschreibung
|Akteur |messenger proxy
|Auslöser | Matrix-Event
|Komponenten a|
              * TI-Messenger-Client
              * Messenger-Proxy A+B,
              * Matrix-Homeserver A+B,
              * Registrierungsdienst,
              * VZD-FHIR-Directory 
|Vorbedingungen a| Der Akteur ist bei seinem Homeserver angemeldet.
|Eingangsdaten |Matrix Event
|Ergebnis a|Der Client erhält die Information, ob die Einladung erfolgreich prozessiert werden konnte. 
|Ausgangsdaten |status
====
.sequence diagram 
[%collapsible%open]
====
++++
<p align="center">
  <img width="60%" src=../../images/diagrams/TI-Messenger-Dienst/Ressourcen/UC_Approvel_List_Seq.svg>
</p>
++++
====