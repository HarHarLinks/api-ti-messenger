ifdef::env-github[]
:tip-caption: :bulb:
:note-caption: :information_source:
:important-caption: :heavy_exclamation_mark:
:caution-caption: :fire:
:warning-caption: :warning:
endif::[]

:imagesdir: ../../images

image:gematik_logo.svg[width=70%]

=== AF_10064 Check federation affiliation of a messenger service
This use case checks whether a messenger service is part of the TI-Messenger federation and applies to all use cases that have to check the Matrix domain of another messenger service. For checking the affiliation of the Matrix domain with the TI-Messenger federation, the messenger proxy uses a federation list that is provided by the registration service of its TI-Messenger specialist service. The storage time of the messenger proxy federation list is limited.

.use case description
[%collapsible%open]
====
[caption=]
Check federation affiliation of a messenger service
[%header, cols="1,1"]
|===
| |description
|Actor |System
|Trigger |The messenger proxy sends or receives a Matrix event and MUST check the MXIDs included in the request for domain belonging to the TI-Messenger federation.
|Components a|
              * Messenger proxy,
              * Matrix home server 
|Preconditions a| none
|Input data |Matrix Event
|Result a|The messenger proxy uses the federation list to determine whether the Matrix domain of the other messenger service is part of the TI-Messenger federation.
|Output data |Status of the Matrix home server and forwarding
|===
====
.sequence diagram 
[%collapsible%open]
====
++++
<p align="center">
  <img width="60%" src=../../images/diagrams/TI-Messenger-Dienst/Ressourcen/UC_10064_Seq.svg>
</p>
++++
====